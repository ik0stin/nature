!function(g,n){if("object"==typeof exports&&"object"==typeof module)module.exports=n();else if("function"==typeof define&&define.amd)define([],n);else{var I=n();for(var C in I)("object"==typeof exports?exports:g)[C]=I[C]}}(self,(()=>(()=>{"use strict";var __webpack_modules__={986:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{eval("// ESM COMPAT FLAG\n__webpack_require__.r(__webpack_exports__);\n\n;// CONCATENATED MODULE: ./src/js/utils.js\nconst imagesLoaded = __webpack_require__(564);\n\n// Preload images\nconst preloadImages = (selector = 'img') => {\n  return new Promise(resolve => {\n    imagesLoaded(document.querySelectorAll(selector), {\n      background: true\n    }, resolve);\n  });\n};\nconst calcWinsize = () => {\n  return {\n    width: window.innerWidth,\n    height: window.innerHeight\n  };\n};\nconst getScrollValues = () => {\n  const supportPageOffset = window.pageXOffset !== undefined;\n  const isCSS1Compat = (document.compatMode || \"\") === \"CSS1Compat\";\n  const x = supportPageOffset ? window.pageXOffset : isCSS1Compat ? document.documentElement.scrollLeft : document.body.scrollLeft;\n  const y = supportPageOffset ? window.pageYOffset : isCSS1Compat ? document.documentElement.scrollTop : document.body.scrollTop;\n  return {\n    x,\n    y\n  };\n};\n\n// wrap each element of an array\n// elems - the array of elements to wrap\n// wrapType - type of wrapper ('div', 'span' etc)\n// wrapClass - wrapper class(s) \nconst utils_wrapLines = (elems, wrapType, wrapClass) => {\n  elems.forEach(char => {\n    // add a wrap for every char (overflow hidden)\n    const wrapEl = document.createElement(wrapType);\n    wrapEl.classList = wrapClass;\n    char.parentNode.appendChild(wrapEl);\n    wrapEl.appendChild(char);\n  });\n};\nconst adjustedBoundingRect = el => {\n  var rect = el.getBoundingClientRect();\n  var style = getComputedStyle(el);\n  var tx = style.transform;\n  if (tx) {\n    var sx, sy, dx, dy;\n    if (tx.startsWith('matrix3d(')) {\n      var ta = tx.slice(9, -1).split(/, /);\n      sx = +ta[0];\n      sy = +ta[5];\n      dx = +ta[12];\n      dy = +ta[13];\n    } else if (tx.startsWith('matrix(')) {\n      var ta = tx.slice(7, -1).split(/, /);\n      sx = +ta[0];\n      sy = +ta[3];\n      dx = +ta[4];\n      dy = +ta[5];\n    } else {\n      return rect;\n    }\n    var to = style.transformOrigin;\n    var x = rect.x - dx - (1 - sx) * parseFloat(to);\n    var y = rect.y - dy - (1 - sy) * parseFloat(to.slice(to.indexOf(' ') + 1));\n    var w = sx ? rect.width / sx : el.offsetWidth;\n    var h = sy ? rect.height / sy : el.offsetHeight;\n    return {\n      x: x,\n      y: y,\n      width: w,\n      height: h,\n      top: y,\n      right: x + w,\n      bottom: y + h,\n      left: x\n    };\n  } else {\n    return rect;\n  }\n};\n\n// EXTERNAL MODULE: ./node_modules/gsap/index.js + 2 modules\nvar node_modules_gsap = __webpack_require__(358);\n;// CONCATENATED MODULE: ./src/js/textReveal.js\n\nclass TextReveal {\n  constructor(el) {\n    this.DOM = {\n      outer: el,\n      inner: Array.isArray(el) ? el.map(outer => outer.querySelector('.oh__inner')) : el.querySelector('.oh__inner')\n    };\n  }\n  in() {\n    if (this.outTimeline && this.outTimeline.isActive()) {\n      this.outTimeline.kill();\n    }\n    this.inTimeline = node_modules_gsap/* gsap */.p8.timeline({\n      defaults: {\n        duration: 1.2,\n        ease: 'expo'\n      }\n    }).set(this.DOM.inner, {\n      y: '120%',\n      rotate: 15\n    }).to(this.DOM.inner, {\n      y: '0%',\n      rotate: 0,\n      stagger: 0.03\n    });\n    return this.inTimeline;\n  }\n  out() {\n    if (this.inTimeline && this.inTimeline.isActive()) {\n      this.inTimeline.kill();\n    }\n    this.outTimeline = node_modules_gsap/* gsap */.p8.timeline({\n      defaults: {\n        duration: 0.5,\n        ease: 'expo.in'\n      }\n    }).to(this.DOM.inner, {\n      y: '-120%',\n      rotate: -5,\n      stagger: 0.03\n    });\n    return this.outTimeline;\n  }\n}\n// EXTERNAL MODULE: ./node_modules/split-type/dist/index.js\nvar dist = __webpack_require__(829);\n;// CONCATENATED MODULE: ./src/js/textLinesReveal.js\n\n\n\nclass TextLinesReveal {\n  constructor(animationElems) {\n    this.DOM = {\n      animationElems: Array.isArray(animationElems) ? animationElems : [animationElems]\n    };\n    this.SplitTypeInstances = [];\n    this.lines = [];\n    for (const el of this.DOM.animationElems) {\n      const SplitTypeInstance = new SplitType(el, {\n        types: 'lines'\n      });\n      wrapLines(SplitTypeInstance.lines, 'div', 'oh');\n      this.lines.push(SplitTypeInstance.lines);\n      this.SplitTypeInstances.push(SplitTypeInstance);\n    }\n    this.initEvents();\n  }\n  in() {\n    this.isVisible = true;\n    gsap.killTweensOf(this.lines);\n    return gsap.timeline({\n      defaults: {\n        duration: 1.2,\n        ease: 'expo'\n      }\n    }).set(this.lines, {\n      y: '150%',\n      rotate: 15\n    }).to(this.lines, {\n      y: '0%',\n      rotate: 0,\n      stagger: 0.04\n    });\n  }\n  out() {\n    this.isVisible = false;\n    gsap.killTweensOf(this.lines);\n    return gsap.timeline({\n      defaults: {\n        duration: 0.5,\n        ease: 'expo.in'\n      }\n    }).to(this.lines, {\n      y: '-150%',\n      rotate: -5,\n      stagger: 0.02\n    });\n  }\n  initEvents() {\n    window.addEventListener('resize', () => {\n      this.lines = [];\n      for (const instance of this.SplitTypeInstances) {\n        instance.split();\n        wrapLines(instance.lines, 'div', 'oh');\n        this.lines.push(instance.lines);\n      }\n      if (!this.isVisible) {\n        gsap.set(this.lines, {\n          y: '-150%'\n        });\n      }\n    });\n  }\n}\n;// CONCATENATED MODULE: ./src/js/contentItem.js\n\n\n\n/**\n * Class representing a content item (.content__item).\n */\nclass ContentItem {\n  DOM = {\n    // Main element (.content__item)\n    el: null\n  };\n\n  // TextReveal obj to animate the texts (slide in/out)\n  textReveal = null;\n\n  // TextLinesReveal obj to animate the ,ulti line texts (slide in/out)\n  textLinesReveal = null;\n\n  /**\n   * Constructor.\n   * DOM_el - the .content__item element.\n   */\n\n  constructor(DOM_el) {\n    this.DOM.el = DOM_el;\n\n    // Text animations\n    this.textReveal = new TextReveal([...this.DOM.el.querySelectorAll('.oh')]);\n    // Text lines animations\n    // this.textLinesReveal = new TextLinesReveal(this.DOM.el.querySelector('.content__item-text'))\n  }\n}\n;// CONCATENATED MODULE: ./src/js/imageCell.js\n\nclass ImageCell {\n  DOM = {\n    // Main element (.grid__cell-img)\n    el: null,\n    // Inner element\n    inner: null,\n    // The ImageCell's content item id.\n    contentId: null,\n    // The ContentItem instance\n    contentItem: null\n  };\n\n  /**\n   * Constructor.\n   *  DOM_el - the .grid__cell-img element.\n   */\n  constructor(DOM_el) {\n    this.DOM.el = DOM_el;\n    this.DOM.inner = this.DOM.el.querySelector('.grid__cell-img-inner');\n\n    // Сохранение исходных значений\n    this.original = {\n      width: this.DOM.el.clientWidth,\n      height: this.DOM.el.clientHeight\n    };\n\n    // The ImageCell's content item id.\n    this.contentId = this.DOM.inner.dataset.item;\n\n    // The ContentItem instance\n    this.contentItem = new ContentItem(document.querySelector(`#${this.contentId}`));\n\n    // window.addEventListener('resize', () => {\n    //   if (!this.contentItem.DOM.el.classList.contains('content__item--current'))\n    //   this.updateOriginalValues.bind(this)\n    // });\n  }\n\n  // updateOriginalValues() {\n  //   this.original.width = this.DOM.el.clientWidth;\n  //   this.original.height = this.DOM.el.clientHeight;\n  //   this.original.x = this.DOM.el.getBoundingClientRect().left;\n  //   this.original.y = this.DOM.el.getBoundingClientRect().top;\n  // }\n}\n// EXTERNAL MODULE: ./node_modules/gsap/CustomEase.js + 1 modules\nvar CustomEase = __webpack_require__(67);\n;// CONCATENATED MODULE: ./src/js/grid.js\n\n\n\n\n\nnode_modules_gsap/* gsap */.p8.registerPlugin(CustomEase/* CustomEase */.t);\nCustomEase/* CustomEase */.t.create('hop', \"M0,0 C0.083,0.294 0.117,0.767 0.413,0.908 0.606,1 0.752,1 1,1\");\nconst bodyEl = document.body;\nlet winsize = calcWinsize();\nwindow.addEventListener('resize', () => winsize = calcWinsize());\nclass Grid {\n  DOM = {\n    el: null,\n    imageCells: null,\n    content: null,\n    miniGrid: {\n      el: null,\n      cells: null\n    },\n    navigation: {\n      left: null,\n      right: null\n    },\n    pagination: {\n      numbers: null\n    }\n  };\n  imageCellArr = [];\n  currentCell = -1;\n  isGridView = true;\n  isAnimation = false;\n  textReveal = null;\n\n  /**\n   * Constructor.\n   * DOM_el - the .grid--large element\n   */\n  constructor(DOM_el) {\n    this.DOM.el = DOM_el;\n    this.DOM.imageCells = [...this.DOM.el.querySelectorAll('.grid__cell-img')];\n    this.DOM.imageCells.forEach(el => this.imageCellArr.push(new ImageCell(el)));\n    this.DOM.content = document.querySelector('.content');\n    // this.DOM.backCtrl = this.DOM.content.querySelector('.back'); должно быть по скроллу\n    this.DOM.miniGrid.el = this.DOM.content.querySelector('.grid--mini');\n    this.DOM.miniGrid.cells = [...this.DOM.miniGrid.el.querySelectorAll('.grid__cell')];\n    this.DOM.navigation = this.DOM.content.querySelector('.content__navigation');\n    this.DOM.navigation.left = this.DOM.navigation.querySelector('.content__navigation-left');\n    this.DOM.navigation.right = this.DOM.navigation.querySelector('.content__navigation-right');\n    this.currentRotation = 0;\n    this.DOM.pagination = this.DOM.content.querySelector('.content__pagination');\n    this.DOM.pagination.numbers = this.DOM.content.querySelector('.content__pagination-conatiner');\n\n    // Text animation проверить\n    this.textReveal = new TextReveal([...this.DOM.el.querySelectorAll('.oh')]);\n\n    // Events\n    this.initEvents();\n  }\n  initEvents() {\n    for (const [position, imageCell] of this.imageCellArr.entries()) {\n      // Open the imageCell and reveal its content\n      imageCell.DOM.el.addEventListener('click', () => {\n        if (!this.isGridView || this.isAnimating) {\n          return false;\n        }\n        this.isAnimating = true;\n        this.isGridView = false;\n\n        // Update the mini grid current cell\n        if (this.currentCell !== -1) {\n          this.DOM.miniGrid.cells[this.currentCell].classList.remove('grid__cell--current');\n        }\n\n        // Update currentCell\n        this.currentCell = position;\n        this.DOM.miniGrid.cells[this.currentCell].classList.add('grid__cell--current');\n        this.showContent(imageCell);\n      });\n\n      // Hover on the image cell will scale down the outer element and scale up the inner element.\n      imageCell.DOM.el.addEventListener('mouseenter', () => {\n        if (!this.isGridView) {\n          return false;\n        }\n        node_modules_gsap/* gsap */.p8.killTweensOf([imageCell.DOM.el, imageCell.DOM.inner]);\n        node_modules_gsap/* gsap */.p8.timeline({\n          defaults: {\n            duration: 2.4,\n            ease: 'expo'\n          }\n        }).to(imageCell.DOM.inner, {\n          scale: 1.1\n        }, 0);\n      });\n\n      // Hovering out will reverse the scale values.\n      imageCell.DOM.el.addEventListener('mouseleave', () => {\n        if (!this.isGridView) {\n          return false;\n        }\n        node_modules_gsap/* gsap */.p8.killTweensOf([imageCell.DOM.el, imageCell.DOM.inner]);\n        node_modules_gsap/* gsap */.p8.timeline({\n          defaults: {\n            duration: 2.4,\n            ease: 'expo'\n          }\n        }).to(imageCell.DOM.inner, {\n          scale: 1\n        }, 0);\n      });\n    }\n\n    // Close the imageCell and reveal the grid\n    window.addEventListener('wheel', () => {\n      if (!this.isGridView || this.isAnimating) {\n        this.isAnimating = true;\n        this.isGridView = true;\n        this.closeContent();\n      }\n    });\n    // this.DOM.content.addEventListener('click', () => {\n    //   if ( this.isAnimating ) {\n    //     return false;\n    //   }\n    //   this.isAnimating = true;\n    //   this.isGridView = true;\n\n    //   this.closeContent();\n    // });\n\n    if (this.imageCellArr.length > 0) {\n      this.currentCell = 0;\n      this.isGridView = false;\n      this.showContent(this.imageCellArr[0]);\n    }\n    this.wheelSlides();\n    this.DOM.miniGrid.cells.forEach((cell, position) => {\n      cell.addEventListener('click', () => {\n        if (this.isAnimating || this.currentCell === position) {\n          return false;\n        }\n        this.isAnimating = true;\n        this.changeContent(position);\n      });\n    });\n\n    // Обработчик для стрелки \"влево\"\n\n    this.DOM.navigation.left.addEventListener('click', () => {\n      if (this.isGridView || this.isAnimating) return false;\n      node_modules_gsap/* gsap */.p8.to([this.DOM.navigation.left, this.DOM.navigation.right], {\n        rotate: this.currentRotation,\n        duration: 1.5,\n        ease: 'hop'\n      });\n      let newPosition = this.currentCell - 1;\n      if (newPosition < 0) {\n        newPosition = this.imageCellArr.length - 1; // Если это первая ячейка, переключаемся на последнюю\n      }\n      this.isAnimating = true;\n      this.changeContent(newPosition);\n    });\n    this.DOM.navigation.right.addEventListener('click', () => {\n      if (this.isGridView || this.isAnimating) return false;\n      node_modules_gsap/* gsap */.p8.to([this.DOM.navigation.left, this.DOM.navigation.right], {\n        rotate: this.currentRotation,\n        duration: 1.5,\n        ease: 'hop'\n      });\n      let newPosition = this.currentCell + 1;\n      if (newPosition >= this.imageCellArr.length) {\n        newPosition = 0; // Если это последняя ячейка, переключаемся на первую\n      }\n      this.isAnimating = true;\n      this.changeContent(newPosition);\n    });\n\n    // Recalculate current image transform\n    window.addEventListener('resize', () => {\n      // const currentImageCell = this.imageCellArr[this.currentCell];\n      // this.imagesRestTransform = this.calcOtherImage();\n      // this.otherImageCells = this.imageCellArr.filter(cell => cell !== currentImageCell);\n\n      // // console.log(this.otherImageCells)\n\n      // this.otherImageCells.forEach(cell => {\n      //   gsap.set(cell.DOM.el, {\n      //     width: this.imagesRestTransform.width,\n      //     height: this.imagesRestTransform.height\n      //   });\n      //   console.log(cell.DOM.el, this.imagesRestTransform.width)\n      // });\n\n      if (this.isGridView) {\n        // this.imagesTransform = this.calcOtherImage();\n\n        // console.log(this.otherImageCells)\n\n        // this.imageCellArr.forEach(cell => {\n        //   gsap.set(cell.DOM.el, {\n        //     width: this.imagesTransform.width,\n        //     height: this.imagesTransform.height\n        //   });\n        //   console.log(cell.DOM.el)\n        // });\n\n        return false;\n      }\n\n      // Calculate the transform to apply to the image cell\n\n      const currentImageCell = this.imageCellArr[this.currentCell];\n      const imageTransform = this.calcTransformImage();\n      node_modules_gsap/* gsap */.p8.set(currentImageCell.DOM.el, {\n        // scale: imageTransform.scale,\n        x: imageTransform.x - 20,\n        y: imageTransform.y - 10,\n        width: window.innerWidth + 40,\n        height: window.innerHeight + 20\n      });\n    });\n  }\n\n  /**\n   * Scale up the image and reveal its content.\n   * @param {ImageCell} imageCell - the imageCell element.\n   */\n\n  showContent(imageCell) {\n    const imagesRestTransform = this.calcOtherImage();\n    const imageTransform = this.calcTransformImage();\n    this.otherImageCells = this.DOM.imageCells.filter(el => el != imageCell.DOM.el);\n    node_modules_gsap/* gsap */.p8.killTweensOf([imageCell.DOM.el, imageCell.DOM.inner, this.otherImageCells]);\n    node_modules_gsap/* gsap */.p8.timeline({\n      defaults: {\n        duration: 1.2,\n        ease: 'hop'\n      },\n      onStart: () => bodyEl.classList.add('oh'),\n      onComplete: () => {\n        this.isAnimating = false;\n      }\n    }).addLabel('start', 0).add(() => {\n      this.textReveal.out();\n    }, 'start').set(this.DOM.el, {\n      pointerEvents: 'none'\n    }, 'start').set(imageCell.DOM.el, {\n      zIndex: 100\n    }, 'start').set([imageCell.DOM.el, imageCell.DOM.inner, this.otherImageCells], {\n      willChange: 'transform, opacity'\n    }, 'start').to(imageCell.DOM.el, {\n      // scale: imageTransform.scale,\n      x: imageTransform.x - 20,\n      y: imageTransform.y - 10,\n      width: window.innerWidth + 40,\n      height: window.innerHeight + 20,\n      onComplete: () => node_modules_gsap/* gsap */.p8.set(imageCell.DOM.el, {\n        willCange: ''\n      })\n    }, 'start').to(imageCell.DOM.inner, {\n      scale: 1,\n      onComplete: () => node_modules_gsap/* gsap */.p8.set(imageCell.DOM.inner, {\n        willChange: ''\n      })\n    }, 'start').to(this.otherImageCells, {\n      opacity: 0,\n      scale: 0.8,\n      onComplete: () => node_modules_gsap/* gsap */.p8.set(this.otherImageCells, {\n        willChange: ''\n      }),\n      stagger: {\n        grid: 'auto',\n        amount: 0.17,\n        from: this.currentCell\n      }\n    }, 'start').set(this.DOM.pagination.numbers, {\n      y: `${-20 * this.currentCell}%`\n    }, 'start').addLabel('showContent', 'start+=0.45').set(this.DOM.miniGrid.el, {\n      opacity: 1\n    }, 'showContent').set(this.DOM.miniGrid.cells, {\n      opacity: 0,\n      y: '100%'\n    }, 'showContent').to(this.DOM.miniGrid.cells, {\n      duration: 1,\n      ease: 'expo',\n      opacity: 1,\n      y: 0,\n      startAt: {\n        scale: 0.8\n      },\n      scale: 1,\n      stagger: {\n        grid: 'auto',\n        amount: 0.3,\n        from: this.currentCell\n      }\n    }, 'showContent+=0.2').to([this.DOM.navigation.left, this.DOM.navigation.right], {\n      duration: 1,\n      ease: 'expo',\n      opacity: 1,\n      scale: 1\n    }, 'showContent+=0.2').to(this.DOM.pagination, {\n      duration: 0.5,\n      y: '0%',\n      opacity: 1,\n      ease: 'expo.in'\n    }, 'showContent+=0.2').add(() => {\n      imageCell.contentItem.textReveal.in();\n      this.DOM.content.classList.add('content--open');\n    }, 'showContent').add(() => imageCell.contentItem.DOM.el.classList.add('content__item--current'), 'showContent+=0.02');\n  }\n\n  /**\n   * Scale down the image and reveal the grid again.\n   */\n  closeContent() {\n    const imageCell = this.imageCellArr[this.currentCell];\n    this.otherImageCells = this.DOM.imageCells.filter(el => el != imageCell.DOM.el);\n\n    // const imagesRestTransform = this.calcOtherImage();\n\n    node_modules_gsap/* gsap */.p8.timeline({\n      defaults: {\n        duration: 1,\n        ease: 'hop'\n      },\n      onStart: () => bodyEl.classList.remove('oh'),\n      onComplete: () => {\n        this.isAnimating = false;\n      }\n    }).addLabel('start', 0).to([this.DOM.navigation.left, this.DOM.navigation.right], {\n      duration: 0.5,\n      ease: 'expo.in',\n      scale: 0\n    }, 'start').to(this.DOM.pagination, {\n      duration: 0.5,\n      y: '10%',\n      opacity: 0,\n      ease: 'expo.in'\n    }, 'start').to(this.DOM.miniGrid.cells, {\n      duration: 0.5,\n      ease: 'expo.in',\n      opacity: 0,\n      y: '100%',\n      stagger: {\n        grid: 'auto',\n        amount: 0.1,\n        from: -this.currentCell\n      },\n      onComplete: () => {\n        node_modules_gsap/* gsap */.p8.set(this.DOM.miniGrid.el, {\n          opacity: 0\n        });\n      }\n    }, 'start').add(() => {\n      imageCell.contentItem.textReveal.out();\n      this.DOM.content.classList.remove('content--open');\n    }, 'start').add(() => imageCell.contentItem.DOM.el.classList.remove('content__item--current')).addLabel('showgrid', 0).set([imageCell.DOM.el, this.otherImageCells], {\n      willChange: 'transform, opacity'\n    }, 'showGrid').to(imageCell.DOM.el, {\n      x: 0,\n      y: 0,\n      width: this.otherImageCells[0].offsetWidth,\n      height: this.otherImageCells[0].offsetHeight,\n      zIndex: 100,\n      onComplete: () => {\n        node_modules_gsap/* gsap */.p8.set(imageCell.DOM.el, {\n          width: 'calc(100% - var(--grid-padding) * 2)',\n          height: 'calc(100% - var(--grid-padding) * 2)',\n          willChange: '',\n          zIndex: 1\n        });\n      }\n    }, 'showGrid').to(this.otherImageCells, {\n      opacity: 1,\n      scale: 1,\n      onComplete: () => {\n        node_modules_gsap/* gsap */.p8.set(this.otherImageCells, {\n          willChange: ''\n        });\n        node_modules_gsap/* gsap */.p8.set(this.DOM.el, {\n          pointerEvents: 'auto'\n        });\n      },\n      stagger: {\n        grid: 'auto',\n        amount: 0.17,\n        from: -this.currentCell\n      }\n    }, 'showGrid').add(() => {\n      this.textReveal.in();\n    }, 'showGrid+=0.3');\n  }\n\n  /**\n   * Change elements when the content is open\n   */\n\n  changeContent(position) {\n    const imageCell = this.imageCellArr[this.currentCell];\n    const upcomingImageCell = this.imageCellArr[position];\n    const innerImage = imageCell.DOM.el.querySelector('img');\n    const upcomingInnerImage = upcomingImageCell.DOM.el.querySelector('img');\n\n    // Обновление текущей ячейки в мини-сетке\n    this.DOM.miniGrid.cells[this.currentCell].classList.remove('grid__cell--current');\n    this.currentCell = position;\n    this.DOM.miniGrid.cells[this.currentCell].classList.add('grid__cell--current');\n\n    // Вычисление трансформации для нового изображения\n    const imageTransform = this.calcTransformImage();\n    const currentNumberPosition = imageCell.contentId.replace(/\\D/g, '');\n    const upcomingNumberPosition = upcomingImageCell.contentId.replace(/\\D/g, '');\n    const direction = upcomingNumberPosition < currentNumberPosition ? 'left' : 'right';\n    if (direction === 'right') {\n      this.currentRotation += 90;\n    } else {\n      this.currentRotation -= 90;\n    }\n    node_modules_gsap/* gsap */.p8.timeline({\n      defaults: {\n        duration: 1.5,\n        ease: 'hop'\n      },\n      onComplete: () => {\n        this.isAnimating = false;\n      }\n    }).addLabel('start', 0).add(imageCell.contentItem.textReveal.out(), 'start').add(() => {\n      imageCell.contentItem.DOM.el.classList.remove('content__item--current');\n    }).set([imageCell.DOM.el, upcomingImageCell.DOM.el], {\n      willChange: 'transform, opacity'\n    }, 'start').set(imageCell.DOM.el, {\n      clipPath: direction === 'right' ? \"polygon(0% 0%, 100% 0%, 100% 100%, 0% 100%)\" : \"polygon(100% 0%, 0% 0%, 0% 100%, 100% 100%)\"\n    }, 'start').set(upcomingImageCell.DOM.el, {\n      clipPath: direction === 'right' ? \"polygon(100% 0%, 100% 0%, 100% 100%, 100% 100%)\" : \"polygon(0% 0%, 0% 0%, 0% 100%, 0% 100%)\",\n      x: imageTransform.x - 20,\n      y: imageTransform.y - 10,\n      width: window.innerWidth + 40,\n      height: window.innerHeight + 20,\n      scale: 1\n    }, 'start').set(upcomingInnerImage, {\n      x: direction === 'right' ? 250 : -250,\n      zIndex: 2\n    }, 'start').to([this.DOM.navigation.left, this.DOM.navigation.right], {\n      rotate: this.currentRotation,\n      duration: 1.5,\n      ease: 'hop'\n    }, 'start').to(imageCell.DOM.el, {\n      clipPath: direction === 'right' ? \"polygon(0% 0%, 0% 0%, 0% 100%, 0% 100%)\" : \"polygon(100% 0%, 100% 0%, 100% 100%, 100% 100%)\"\n\n      // onComplete: () => gsap.set(imageCell.DOM.el, { opacity: 0 })\n    }, 'start').to(innerImage, {\n      x: direction === 'right' ? -500 : 500,\n      duration: 1.5,\n      ease: 'hop'\n    }, 'start').to(upcomingImageCell.DOM.el, {\n      clipPath: direction === 'right' ? \"polygon(100% 0%, 0% 0%, 0% 100%, 100% 100%)\" : \"polygon(0% 0%, 100% 0%, 100% 100%, 0% 100%)\",\n      opacity: 1,\n      onComplete: () => {\n        node_modules_gsap/* gsap */.p8.set([imageCell.DOM.el, upcomingImageCell.DOM.el], {\n          willChange: ''\n        });\n        node_modules_gsap/* gsap */.p8.set(imageCell.DOM.el, {\n          clipPath: null,\n          x: 0,\n          y: 0,\n          scale: 0.8,\n          width: 'calc(100% - var(--grid-padding) * 2)',\n          height: 'calc(100% - var(--grid-padding) * 2)',\n          opacity: 0,\n          zIndex: null\n        }, 'start');\n        node_modules_gsap/* gsap */.p8.set(innerImage, {\n          x: 0\n        });\n      }\n    }, 'start').to(upcomingInnerImage, {\n      x: 0,\n      duration: 1.5,\n      ease: 'hop'\n    }, 'start').to(this.DOM.pagination.numbers, {\n      y: `${-20 * this.currentCell}%`,\n      // Смещаем контейнер вверх на 20% на каждый индекс\n      duration: 1.5,\n      ease: 'hop'\n    }, 'start').addLabel('showContent', '>-=0.4').add(() => {\n      upcomingImageCell.contentItem.textReveal.in();\n    }, 'showContent').add(() => {\n      upcomingImageCell.contentItem.DOM.el.classList.add('content__item--current');\n    }, 'showContent+=0.02');\n\n    // вот тут подумать\n    // .set(imageCell.DOM.el, {\n    //   x: 0,\n    //   y: 0,\n    //   width: this.otherImageCells[0].offsetWidth,\n    //   height: this.otherImageCells[0].offsetHeight,\n    //   clipPath: null,\n    //   // willChange: '',\n    //   zIndex: 1,\n    //   onComplete: () => {\n    //     gsap.set(innerImage, {\n    //       x: 0,\n    //     },'showContent+=0.04')\n    //   }\n    // },'showContent+=0.02')\n  }\n  wheelSlides() {\n    // if ( !this.isGridView || this.isAnimating) {\n    //   return false;\n    // }\n    const track = document.getElementById('image-track');\n\n    // window.onmousedown = e => {\n    //   track.dataset.mouseDownAt = e.clientX;\n    // }\n\n    // window.onmouseup = () => {\n    //   track.dataset.mouseDownAt = \"0\";\n    //   track.dataset.prevPercentage = track.dataset.percentage;\n    // }\n\n    // window.onmousemove = e => {\n    //   if (track.dataset.mouseDownAt === \"0\" ) return;\n\n    //   const mouseDelta = parseFloat(track.dataset.mouseDownAt) - e.clientX,\n    //         maxDelta = window.innerWidth / 2;\n\n    //   const percentage = (mouseDelta / maxDelta) * -100,\n    //   nextPercentageUnrestricted = parseFloat(track.dataset.prevPercentage) + percentage;\n\n    //   const nextPercentage = Math.max(Math.min(nextPercentageUnrestricted, 0), -100);\n\n    //   track.dataset.percentage = nextPercentage;\n\n    //   track.animate({\n    //     transform: `translate(${nextPercentage}%, -50%)`\n    //   }, { duration: 1200, fill: \"forwards\"})\n\n    //   for (const image of track.getElementsByClassName('image')) {\n    //     image.animate({\n    //       objectPosition: `${nextPercentage + 100}% center`\n    //     }, { duration: 1200, fill: \"forwards\"})\n    //   }\n    // }\n\n    track.onwheel = e => {\n      const maxDelta = window.innerWidth / 2;\n      const scrollDelta = e.deltaY,\n        percentage = scrollDelta / maxDelta * -10; // Изменяем скорость скролла\n\n      console.log(percentage);\n      const nextPercentageUnrestricted = parseFloat(track.dataset.prevPercentage) + percentage;\n      const nextPercentage = Math.max(Math.min(nextPercentageUnrestricted, 0), -100);\n      track.dataset.prevPercentage = nextPercentage;\n      track.animate({\n        transform: `translate(${nextPercentage}%, -50%)`\n      }, {\n        duration: 1200,\n        fill: \"forwards\"\n      });\n      for (const image of track.getElementsByClassName('image')) {\n        image.animate({\n          objectPosition: `${nextPercentage + 100}% center`\n        }, {\n          duration: 1200,\n          fill: \"forwards\"\n        });\n      }\n    };\n  }\n  calcOtherImage() {\n    if (!this.isGridView) return false;\n    const masterCell = adjustedBoundingRect(this.imageCellArr[0].DOM.el);\n    return {\n      width: masterCell.width,\n      height: masterCell.height,\n      x: -masterCell.left,\n      y: -masterCell.top\n    };\n  }\n  calcTransformImage() {\n    const cellrect = adjustedBoundingRect(this.imageCellArr[this.currentCell].DOM.el);\n    return {\n      width: cellrect.width,\n      height: cellrect.height,\n      scale: winsize.width * 0.54 / cellrect.width,\n      // x: winsize.width * 0.65 - (cellrect.left + cellrect.width/2),\n      // y: winsize.height * 0.50 - (cellrect.top + cellrect.height/2)\n      x: -cellrect.left,\n      y: -cellrect.top\n    };\n  }\n}\n\n// https://camillemormal.com/\n;// CONCATENATED MODULE: ./src/js/preloaderAnimation.js\nconst preloaderAnimation = () => {\n  let tl = gsap.timeline({\n    delay: 0\n  });\n  tl.to('.col', {\n    top: 0,\n    duration: 3,\n    ease: 'power4.inOut'\n  });\n  tl.to('.c-1 .item', {\n    top: 0,\n    stagger: 0.25,\n    duration: 3,\n    ease: 'power4.inOut'\n  }, '-=2');\n  tl.to('.c-2 .item', {\n    top: 0,\n    stagger: -0.25,\n    duration: 3,\n    ease: 'power4.inOut'\n  }, '-=4');\n  tl.to('.c-3 .item', {\n    top: 0,\n    stagger: 0.25,\n    duration: 3,\n    ease: 'power4.inOut'\n  }, '-=4');\n  tl.to('.c-4 .item', {\n    top: 0,\n    stagger: -0.25,\n    duration: 3,\n    ease: 'power4.inOut'\n  }, '-=4');\n  tl.to('.c-5 .item', {\n    top: 0,\n    stagger: 0.25,\n    duration: 3,\n    ease: 'power4.inOut'\n  }, '-=4');\n  tl.to('.container', {\n    scale: 5.3,\n    duration: 4,\n    ease: 'power4.inOut'\n  }, '-=2');\n  tl.to('.cross', {\n    scale: 1,\n    duration: 1,\n    ease: 'power3.inOut'\n  }, '-=1.5');\n  tl.to('.nav-item a, .title p, .slide-num p, .preview img', {\n    top: 0,\n    stagger: 0.075,\n    duration: 1,\n    ease: 'power3.inOut',\n    onComplete: () => {\n      gsap.set(['.container', '.content-preloader'], {\n        display: \"none\"\n      });\n    }\n  }, '-=1.5');\n};\n/* harmony default export */ const js_preloaderAnimation = (preloaderAnimation);\n;// CONCATENATED MODULE: ./src/js/index.js\n\n\n\n\n\nwindow.addEventListener('DOMContentLoaded', () => {\n  preloadImages('.grid__cell-img-inner, .slide-nav__img').then(() => {\n    js_preloaderAnimation();\n    new Grid(document.querySelector('.grid--large'));\n    // document.body.classList.remove('loading')\n  });\n\n  // const setupMediaQueries = () => {\n  //   const mm = gsap.matchMedia();\n  //   const breakPoint = 991;\n\n  //   mm.add({\n  //     isMobile: `(max-width: ${breakPoint}px)`,\n  //     isDesktop: `(min-width: ${breakPoint + 1}px)`\n  //   }, (context) => {\n  //     const { isMobile, isDesktop } = context.conditions;\n\n  //     if (isDesktop) setupDesktopFeatures();\n  //     if (isMobile) setupMobileFeatures();\n  //   });\n  // };\n\n  // const setupDesktopFeatures = () => {\n  // };\n\n  // const setupMobileFeatures = () => {\n\n  // };\n\n  // setupMediaQueries();\n});//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiOTg2LmpzIiwibWFwcGluZ3MiOiI7Ozs7QUFBQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7QUNyRUE7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7OztBQ3ZDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUVBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBRUE7QUFDQTtBQUVBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNwRUE7QUFDQTs7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNqQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7Ozs7QUNoREE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFLQTtBQUVBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7O0FBR0E7QUFDQTs7QUFFQTtBQUNBO0FBRUE7QUFFQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUlBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFLQTs7QUFFQTtBQUNBO0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUlBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBRUE7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBOztBQUdBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUdBO0FBQ0E7QUFFQTtBQUNBO0FBRUE7QUFDQTtBQUVBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFHQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBSUE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUlBO0FBQ0E7QUFFQTtBQUNBO0FBRUE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFFQTs7QUFFQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFHQTtBQUNBO0FBRUE7QUFDQTs7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFFQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUdBO0FBQ0E7QUFFQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBR0E7O0FBRUE7O0FDanJCQTtBQUNBO0FBQUE7QUFBQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFFQTtBQUVBOztBQ2xFQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBR0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7O0FBRUE7O0FBR0E7QUFFQSIsInNvdXJjZXMiOlsid2VicGFjazovLy8uL3NyYy9qcy91dGlscy5qcz85OTQ0Iiwid2VicGFjazovLy8uL3NyYy9qcy90ZXh0UmV2ZWFsLmpzPzBjNGQiLCJ3ZWJwYWNrOi8vLy4vc3JjL2pzL3RleHRMaW5lc1JldmVhbC5qcz85MTUwIiwid2VicGFjazovLy8uL3NyYy9qcy9jb250ZW50SXRlbS5qcz9kZWMxIiwid2VicGFjazovLy8uL3NyYy9qcy9pbWFnZUNlbGwuanM/N2Q4YSIsIndlYnBhY2s6Ly8vLi9zcmMvanMvZ3JpZC5qcz9lN2VmIiwid2VicGFjazovLy8uL3NyYy9qcy9wcmVsb2FkZXJBbmltYXRpb24uanM/MTBmYiIsIndlYnBhY2s6Ly8vLi9zcmMvanMvaW5kZXguanM/N2JhNSJdLCJzb3VyY2VzQ29udGVudCI6WyJjb25zdCBpbWFnZXNMb2FkZWQgPSByZXF1aXJlKCdpbWFnZXNsb2FkZWQnKTtcblxuLy8gUHJlbG9hZCBpbWFnZXNcbmNvbnN0IHByZWxvYWRJbWFnZXMgPSAoc2VsZWN0b3IgPSAnaW1nJykgPT4ge1xuICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSkgPT4ge1xuICAgICAgICBpbWFnZXNMb2FkZWQoZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChzZWxlY3RvciksIHtiYWNrZ3JvdW5kOiB0cnVlfSwgcmVzb2x2ZSk7XG4gICAgfSk7XG59O1xuXG5jb25zdCBjYWxjV2luc2l6ZSA9ICgpID0+IHtcbiAgICByZXR1cm4geyB3aWR0aDogd2luZG93LmlubmVyV2lkdGgsIGhlaWdodDogd2luZG93LmlubmVySGVpZ2h0IH07XG59O1xuXG5jb25zdCBnZXRTY3JvbGxWYWx1ZXMgPSAoKSA9PiB7XG4gICAgY29uc3Qgc3VwcG9ydFBhZ2VPZmZzZXQgPSB3aW5kb3cucGFnZVhPZmZzZXQgIT09IHVuZGVmaW5lZDtcbiAgICBjb25zdCBpc0NTUzFDb21wYXQgPSAoKGRvY3VtZW50LmNvbXBhdE1vZGUgfHwgXCJcIikgPT09IFwiQ1NTMUNvbXBhdFwiKTtcbiAgICBjb25zdCB4ID0gc3VwcG9ydFBhZ2VPZmZzZXQgPyB3aW5kb3cucGFnZVhPZmZzZXQgOiBpc0NTUzFDb21wYXQgPyBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuc2Nyb2xsTGVmdCA6IGRvY3VtZW50LmJvZHkuc2Nyb2xsTGVmdDtcbiAgICBjb25zdCB5ID0gc3VwcG9ydFBhZ2VPZmZzZXQgPyB3aW5kb3cucGFnZVlPZmZzZXQgOiBpc0NTUzFDb21wYXQgPyBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuc2Nyb2xsVG9wIDogZG9jdW1lbnQuYm9keS5zY3JvbGxUb3A7XG4gICAgcmV0dXJuIHt4LHl9O1xufVxuXG4vLyB3cmFwIGVhY2ggZWxlbWVudCBvZiBhbiBhcnJheVxuLy8gZWxlbXMgLSB0aGUgYXJyYXkgb2YgZWxlbWVudHMgdG8gd3JhcFxuLy8gd3JhcFR5cGUgLSB0eXBlIG9mIHdyYXBwZXIgKCdkaXYnLCAnc3BhbicgZXRjKVxuLy8gd3JhcENsYXNzIC0gd3JhcHBlciBjbGFzcyhzKSBcbmNvbnN0IHdyYXBMaW5lcyA9IChlbGVtcywgd3JhcFR5cGUsIHdyYXBDbGFzcykgPT4ge1xuICAgIGVsZW1zLmZvckVhY2goY2hhciA9PiB7XG4gICAgICAgIC8vIGFkZCBhIHdyYXAgZm9yIGV2ZXJ5IGNoYXIgKG92ZXJmbG93IGhpZGRlbilcbiAgICAgICAgY29uc3Qgd3JhcEVsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCh3cmFwVHlwZSk7XG4gICAgICAgIHdyYXBFbC5jbGFzc0xpc3QgPSB3cmFwQ2xhc3M7XG4gICAgICAgIGNoYXIucGFyZW50Tm9kZS5hcHBlbmRDaGlsZCh3cmFwRWwpO1xuICAgICAgICB3cmFwRWwuYXBwZW5kQ2hpbGQoY2hhcik7XG4gICAgfSk7XG59XG5cbmNvbnN0IGFkanVzdGVkQm91bmRpbmdSZWN0ID0gZWwgPT4ge1xuICAgIHZhciByZWN0ID0gZWwuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XG4gICAgdmFyIHN0eWxlID0gZ2V0Q29tcHV0ZWRTdHlsZShlbCk7XG4gICAgdmFyIHR4ID0gc3R5bGUudHJhbnNmb3JtO1xuICBcbiAgICBpZiAodHgpIHtcbiAgICAgIHZhciBzeCwgc3ksIGR4LCBkeTtcbiAgICAgIGlmICh0eC5zdGFydHNXaXRoKCdtYXRyaXgzZCgnKSkge1xuICAgICAgICB2YXIgdGEgPSB0eC5zbGljZSg5LC0xKS5zcGxpdCgvLCAvKTtcbiAgICAgICAgc3ggPSArdGFbMF07XG4gICAgICAgIHN5ID0gK3RhWzVdO1xuICAgICAgICBkeCA9ICt0YVsxMl07XG4gICAgICAgIGR5ID0gK3RhWzEzXTtcbiAgICAgIH0gZWxzZSBpZiAodHguc3RhcnRzV2l0aCgnbWF0cml4KCcpKSB7XG4gICAgICAgIHZhciB0YSA9IHR4LnNsaWNlKDcsLTEpLnNwbGl0KC8sIC8pO1xuICAgICAgICBzeCA9ICt0YVswXTtcbiAgICAgICAgc3kgPSArdGFbM107XG4gICAgICAgIGR4ID0gK3RhWzRdO1xuICAgICAgICBkeSA9ICt0YVs1XTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJldHVybiByZWN0O1xuICAgICAgfVxuICBcbiAgICAgIHZhciB0byA9IHN0eWxlLnRyYW5zZm9ybU9yaWdpbjtcbiAgICAgIHZhciB4ID0gcmVjdC54IC0gZHggLSAoMSAtIHN4KSAqIHBhcnNlRmxvYXQodG8pO1xuICAgICAgdmFyIHkgPSByZWN0LnkgLSBkeSAtICgxIC0gc3kpICogcGFyc2VGbG9hdCh0by5zbGljZSh0by5pbmRleE9mKCcgJykgKyAxKSk7XG4gICAgICB2YXIgdyA9IHN4ID8gcmVjdC53aWR0aCAvIHN4IDogZWwub2Zmc2V0V2lkdGg7XG4gICAgICB2YXIgaCA9IHN5ID8gcmVjdC5oZWlnaHQgLyBzeSA6IGVsLm9mZnNldEhlaWdodDtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIHg6IHgsIHk6IHksIHdpZHRoOiB3LCBoZWlnaHQ6IGgsIHRvcDogeSwgcmlnaHQ6IHggKyB3LCBib3R0b206IHkgKyBoLCBsZWZ0OiB4XG4gICAgICB9O1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gcmVjdDtcbiAgICB9XG59XG5cbmV4cG9ydCB7IFxuICAgIHByZWxvYWRJbWFnZXMsXG4gICAgY2FsY1dpbnNpemUsXG4gICAgZ2V0U2Nyb2xsVmFsdWVzLFxuICAgIHdyYXBMaW5lcyxcbiAgICBhZGp1c3RlZEJvdW5kaW5nUmVjdFxufTsiLCJpbXBvcnQgeyBnc2FwIH0gZnJvbSAnZ3NhcCc7XG5cbmV4cG9ydCBjbGFzcyBUZXh0UmV2ZWFsIHtcbiAgICBjb25zdHJ1Y3RvcihlbCkge1xuICAgICAgICB0aGlzLkRPTSA9IHtcbiAgICAgICAgICAgIG91dGVyOiBlbCxcbiAgICAgICAgICAgIGlubmVyOiBBcnJheS5pc0FycmF5KGVsKSA/IGVsLm1hcChvdXRlciA9PiBvdXRlci5xdWVyeVNlbGVjdG9yKCcub2hfX2lubmVyJykpIDogZWwucXVlcnlTZWxlY3RvcignLm9oX19pbm5lcicpXG4gICAgICAgIH1cbiAgICB9XG4gICAgaW4oKSB7XG4gICAgICAgIGlmICggdGhpcy5vdXRUaW1lbGluZSAmJiB0aGlzLm91dFRpbWVsaW5lLmlzQWN0aXZlKCkgKSB7XG4gICAgICAgICAgICB0aGlzLm91dFRpbWVsaW5lLmtpbGwoKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMuaW5UaW1lbGluZSA9IGdzYXAudGltZWxpbmUoe2RlZmF1bHRzOiB7ZHVyYXRpb246IDEuMiwgZWFzZTogJ2V4cG8nfX0pXG4gICAgICAgIC5zZXQodGhpcy5ET00uaW5uZXIsIHtcbiAgICAgICAgICAgIHk6ICcxMjAlJyxcbiAgICAgICAgICAgIHJvdGF0ZTogMTVcbiAgICAgICAgfSlcbiAgICAgICAgLnRvKHRoaXMuRE9NLmlubmVyLCB7XG4gICAgICAgICAgICB5OiAnMCUnLFxuICAgICAgICAgICAgcm90YXRlOiAwLFxuICAgICAgICAgICAgc3RhZ2dlcjogMC4wM1xuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIHRoaXMuaW5UaW1lbGluZTtcbiAgICB9XG4gICAgb3V0KCkge1xuICAgICAgICBpZiAoIHRoaXMuaW5UaW1lbGluZSAmJiB0aGlzLmluVGltZWxpbmUuaXNBY3RpdmUoKSApIHtcbiAgICAgICAgICAgIHRoaXMuaW5UaW1lbGluZS5raWxsKCk7XG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLm91dFRpbWVsaW5lID0gZ3NhcC50aW1lbGluZSh7ZGVmYXVsdHM6IHtkdXJhdGlvbjogMC41LCBlYXNlOiAnZXhwby5pbid9fSlcbiAgICAgICAgLnRvKHRoaXMuRE9NLmlubmVyLCB7XG4gICAgICAgICAgICB5OiAnLTEyMCUnLFxuICAgICAgICAgICAgcm90YXRlOiAtNSxcbiAgICAgICAgICAgIHN0YWdnZXI6IDAuMDNcbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiB0aGlzLm91dFRpbWVsaW5lO1xuICAgIH1cbn0iLCJpbXBvcnQgU3BsaXRUeXBlIGZyb20gJ3NwbGl0LXR5cGUnO1xuaW1wb3J0IHsgd3JhcExpbmVzIH0gZnJvbSAnLi91dGlscyc7XG5pbXBvcnQgeyBnc2FwIH0gZnJvbSAnZ3NhcCc7XG5cbmV4cG9ydCBjbGFzcyBUZXh0TGluZXNSZXZlYWwge1xuICBjb25zdHJ1Y3RvcihhbmltYXRpb25FbGVtcykge1xuICAgIHRoaXMuRE9NID0ge1xuICAgICAgYW5pbWF0aW9uRWxlbXM6IEFycmF5LmlzQXJyYXkoYW5pbWF0aW9uRWxlbXMpID8gYW5pbWF0aW9uRWxlbXMgOiBbYW5pbWF0aW9uRWxlbXNdXG4gICAgfTtcblxuICAgIHRoaXMuU3BsaXRUeXBlSW5zdGFuY2VzID0gW107XG4gICAgdGhpcy5saW5lcyA9IFtdO1xuXG4gICAgZm9yIChjb25zdCBlbCBvZiB0aGlzLkRPTS5hbmltYXRpb25FbGVtcykge1xuICAgICAgY29uc3QgU3BsaXRUeXBlSW5zdGFuY2UgPSBuZXcgU3BsaXRUeXBlKGVsLCB7IHR5cGVzOiAnbGluZXMnIH0pO1xuICAgICAgd3JhcExpbmVzKFNwbGl0VHlwZUluc3RhbmNlLmxpbmVzLCAnZGl2JywgJ29oJyk7XG4gICAgICB0aGlzLmxpbmVzLnB1c2goU3BsaXRUeXBlSW5zdGFuY2UubGluZXMpO1xuICAgICAgdGhpcy5TcGxpdFR5cGVJbnN0YW5jZXMucHVzaChTcGxpdFR5cGVJbnN0YW5jZSk7XG4gICAgfVxuXG4gICAgdGhpcy5pbml0RXZlbnRzKCk7XG4gIH1cblxuICBpbigpIHtcbiAgICB0aGlzLmlzVmlzaWJsZSA9IHRydWU7XG5cbiAgICBnc2FwLmtpbGxUd2VlbnNPZih0aGlzLmxpbmVzKVxuICAgIHJldHVybiBnc2FwLnRpbWVsaW5lKHsgZGVmYXVsdHM6IHsgZHVyYXRpb246IDEuMiwgZWFzZTogJ2V4cG8nIH0gfSlcbiAgICAgIC5zZXQodGhpcy5saW5lcywge1xuICAgICAgICB5OiAnMTUwJScsXG4gICAgICAgIHJvdGF0ZTogMTVcbiAgICAgIH0pXG4gICAgICAudG8odGhpcy5saW5lcywge1xuICAgICAgICB5OiAnMCUnLFxuICAgICAgICByb3RhdGU6IDAsXG4gICAgICAgIHN0YWdnZXI6IDAuMDRcbiAgICAgIH0pO1xuICB9XG5cbiAgb3V0KCkge1xuICAgIHRoaXMuaXNWaXNpYmxlID0gZmFsc2U7XG4gICAgZ3NhcC5raWxsVHdlZW5zT2YodGhpcy5saW5lcyk7XG4gICAgcmV0dXJuIGdzYXAudGltZWxpbmUoe1xuICAgICAgZGVmYXVsdHM6IHsgZHVyYXRpb246IDAuNSwgZWFzZTogJ2V4cG8uaW4nIH1cbiAgICB9KVxuICAgICAgLnRvKHRoaXMubGluZXMsIHtcbiAgICAgICAgeTogJy0xNTAlJyxcbiAgICAgICAgcm90YXRlOiAtNSxcbiAgICAgICAgc3RhZ2dlcjogMC4wMlxuICAgICAgfSk7XG4gIH1cblxuICBpbml0RXZlbnRzKCkge1xuICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdyZXNpemUnLCAoKSA9PiB7XG4gICAgICB0aGlzLmxpbmVzID0gW107XG5cbiAgICAgIGZvciAoY29uc3QgaW5zdGFuY2Ugb2YgdGhpcy5TcGxpdFR5cGVJbnN0YW5jZXMpIHtcbiAgICAgICAgaW5zdGFuY2Uuc3BsaXQoKTtcblxuICAgICAgICB3cmFwTGluZXMoaW5zdGFuY2UubGluZXMsICdkaXYnLCAnb2gnKTtcbiAgICAgICAgdGhpcy5saW5lcy5wdXNoKGluc3RhbmNlLmxpbmVzKTtcbiAgICAgIH1cblxuICAgICAgaWYgKCF0aGlzLmlzVmlzaWJsZSkge1xuICAgICAgICBnc2FwLnNldCh0aGlzLmxpbmVzLCB7IHk6ICctMTUwJScgfSk7XG4gICAgICB9XG4gICAgfSk7XG4gIH1cbn0iLCJpbXBvcnQgeyBUZXh0UmV2ZWFsIH0gZnJvbSAnLi90ZXh0UmV2ZWFsJztcbmltcG9ydCB7IFRleHRMaW5lc1JldmVhbCB9IGZyb20gJy4vdGV4dExpbmVzUmV2ZWFsJztcblxuXG4vKipcbiAqIENsYXNzIHJlcHJlc2VudGluZyBhIGNvbnRlbnQgaXRlbSAoLmNvbnRlbnRfX2l0ZW0pLlxuICovXG5leHBvcnQgY2xhc3MgQ29udGVudEl0ZW0ge1xuICBET00gPSB7XG4gICAgLy8gTWFpbiBlbGVtZW50ICguY29udGVudF9faXRlbSlcbiAgICBlbDogbnVsbFxuICB9O1xuXG4gIC8vIFRleHRSZXZlYWwgb2JqIHRvIGFuaW1hdGUgdGhlIHRleHRzIChzbGlkZSBpbi9vdXQpXG4gIHRleHRSZXZlYWwgPSBudWxsO1xuXG4gIC8vIFRleHRMaW5lc1JldmVhbCBvYmogdG8gYW5pbWF0ZSB0aGUgLHVsdGkgbGluZSB0ZXh0cyAoc2xpZGUgaW4vb3V0KVxuICB0ZXh0TGluZXNSZXZlYWwgPSBudWxsO1xuXG4gIC8qKlxuICAgKiBDb25zdHJ1Y3Rvci5cbiAgICogRE9NX2VsIC0gdGhlIC5jb250ZW50X19pdGVtIGVsZW1lbnQuXG4gICAqL1xuXG4gIGNvbnN0cnVjdG9yKERPTV9lbCkge1xuICAgIHRoaXMuRE9NLmVsID0gRE9NX2VsO1xuICAgIFxuXG4gICAgLy8gVGV4dCBhbmltYXRpb25zXG4gICAgdGhpcy50ZXh0UmV2ZWFsID0gbmV3IFRleHRSZXZlYWwoWy4uLnRoaXMuRE9NLmVsLnF1ZXJ5U2VsZWN0b3JBbGwoJy5vaCcpXSk7XG4gICAgLy8gVGV4dCBsaW5lcyBhbmltYXRpb25zXG4gICAgLy8gdGhpcy50ZXh0TGluZXNSZXZlYWwgPSBuZXcgVGV4dExpbmVzUmV2ZWFsKHRoaXMuRE9NLmVsLnF1ZXJ5U2VsZWN0b3IoJy5jb250ZW50X19pdGVtLXRleHQnKSlcbiAgfVxufSIsImltcG9ydCB7ICBDb250ZW50SXRlbSB9IGZyb20gJy4vY29udGVudEl0ZW0nO1xuXG5leHBvcnQgY2xhc3MgSW1hZ2VDZWxsIHtcbiAgRE9NID0ge1xuICAgIC8vIE1haW4gZWxlbWVudCAoLmdyaWRfX2NlbGwtaW1nKVxuICAgIGVsOiBudWxsLFxuICAgIC8vIElubmVyIGVsZW1lbnRcbiAgICBpbm5lcjogbnVsbCxcbiAgICAvLyBUaGUgSW1hZ2VDZWxsJ3MgY29udGVudCBpdGVtIGlkLlxuICAgIGNvbnRlbnRJZDogbnVsbCxcbiAgICAvLyBUaGUgQ29udGVudEl0ZW0gaW5zdGFuY2VcbiAgICBjb250ZW50SXRlbTogbnVsbFxuICB9O1xuXG4gIC8qKlxuICAgKiBDb25zdHJ1Y3Rvci5cbiAgICogIERPTV9lbCAtIHRoZSAuZ3JpZF9fY2VsbC1pbWcgZWxlbWVudC5cbiAgICovXG4gIGNvbnN0cnVjdG9yKERPTV9lbCkge1xuICAgIHRoaXMuRE9NLmVsID0gRE9NX2VsO1xuICAgIHRoaXMuRE9NLmlubmVyID0gdGhpcy5ET00uZWwucXVlcnlTZWxlY3RvcignLmdyaWRfX2NlbGwtaW1nLWlubmVyJyk7XG5cbiAgICAvLyDQodC+0YXRgNCw0L3QtdC90LjQtSDQuNGB0YXQvtC00L3Ri9GFINC30L3QsNGH0LXQvdC40LlcbiAgICB0aGlzLm9yaWdpbmFsID0ge1xuICAgICAgd2lkdGg6IHRoaXMuRE9NLmVsLmNsaWVudFdpZHRoLFxuICAgICAgaGVpZ2h0OiB0aGlzLkRPTS5lbC5jbGllbnRIZWlnaHQsXG4gICAgfTtcblxuICAgIC8vIFRoZSBJbWFnZUNlbGwncyBjb250ZW50IGl0ZW0gaWQuXG4gICAgdGhpcy5jb250ZW50SWQgPSB0aGlzLkRPTS5pbm5lci5kYXRhc2V0Lml0ZW07XG5cbiAgICAvLyBUaGUgQ29udGVudEl0ZW0gaW5zdGFuY2VcbiAgICB0aGlzLmNvbnRlbnRJdGVtID0gbmV3IENvbnRlbnRJdGVtKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoYCMke3RoaXMuY29udGVudElkfWApKTtcblxuICAgIC8vIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdyZXNpemUnLCAoKSA9PiB7XG4gICAgLy8gICBpZiAoIXRoaXMuY29udGVudEl0ZW0uRE9NLmVsLmNsYXNzTGlzdC5jb250YWlucygnY29udGVudF9faXRlbS0tY3VycmVudCcpKVxuICAgIC8vICAgdGhpcy51cGRhdGVPcmlnaW5hbFZhbHVlcy5iaW5kKHRoaXMpXG4gICAgLy8gfSk7XG5cbiAgfVxuXG4gIC8vIHVwZGF0ZU9yaWdpbmFsVmFsdWVzKCkge1xuICAvLyAgIHRoaXMub3JpZ2luYWwud2lkdGggPSB0aGlzLkRPTS5lbC5jbGllbnRXaWR0aDtcbiAgLy8gICB0aGlzLm9yaWdpbmFsLmhlaWdodCA9IHRoaXMuRE9NLmVsLmNsaWVudEhlaWdodDtcbiAgLy8gICB0aGlzLm9yaWdpbmFsLnggPSB0aGlzLkRPTS5lbC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS5sZWZ0O1xuICAvLyAgIHRoaXMub3JpZ2luYWwueSA9IHRoaXMuRE9NLmVsLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLnRvcDtcbiAgLy8gfVxuXG59IiwiaW1wb3J0IHsgSW1hZ2VDZWxsIH0gZnJvbSAnLi9pbWFnZUNlbGwnO1xuaW1wb3J0IHsgY2FsY1dpbnNpemUsIGFkanVzdGVkQm91bmRpbmdSZWN0IH0gZnJvbSAnLi91dGlscyc7XG5pbXBvcnQgeyBUZXh0UmV2ZWFsIH0gZnJvbSAnLi90ZXh0UmV2ZWFsJztcbmltcG9ydCB7IGdzYXAgfSBmcm9tICdnc2FwJztcbmltcG9ydCB7IEN1c3RvbUVhc2UgfSBmcm9tICdnc2FwL2FsbCc7XG5cbmdzYXAucmVnaXN0ZXJQbHVnaW4oQ3VzdG9tRWFzZSk7XG5DdXN0b21FYXNlLmNyZWF0ZShcbiAgJ2hvcCcsXG4gIFwiTTAsMCBDMC4wODMsMC4yOTQgMC4xMTcsMC43NjcgMC40MTMsMC45MDggMC42MDYsMSAwLjc1MiwxIDEsMVwiXG4pO1xuXG5jb25zdCBib2R5RWwgPSBkb2N1bWVudC5ib2R5O1xuXG5sZXQgd2luc2l6ZSA9IGNhbGNXaW5zaXplKCk7XG53aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcigncmVzaXplJywgKCkgPT4gd2luc2l6ZSA9IGNhbGNXaW5zaXplKCkpO1xuXG5leHBvcnQgY2xhc3MgR3JpZCB7XG4gIERPTSA9IHtcbiAgICBlbDogbnVsbCxcbiAgICBpbWFnZUNlbGxzOiBudWxsLFxuICAgIGNvbnRlbnQ6IG51bGwsXG4gICAgbWluaUdyaWQ6IHtcbiAgICAgIGVsOiBudWxsLFxuICAgICAgY2VsbHM6IG51bGxcbiAgICB9LFxuICAgIG5hdmlnYXRpb246IHtcbiAgICAgIGxlZnQ6IG51bGwsXG4gICAgICByaWdodDogbnVsbFxuICAgIH0sXG4gICAgcGFnaW5hdGlvbjoge1xuICAgICAgbnVtYmVyczogbnVsbFxuICAgIH0sXG4gIH07XG5cbiAgaW1hZ2VDZWxsQXJyID0gW107XG4gIGN1cnJlbnRDZWxsID0gLTE7XG4gIGlzR3JpZFZpZXcgPSB0cnVlO1xuICBpc0FuaW1hdGlvbiA9IGZhbHNlO1xuICB0ZXh0UmV2ZWFsID0gbnVsbDtcblxuICAvKipcbiAgICogQ29uc3RydWN0b3IuXG4gICAqIERPTV9lbCAtIHRoZSAuZ3JpZC0tbGFyZ2UgZWxlbWVudFxuICAgKi9cbiAgY29uc3RydWN0b3IoRE9NX2VsKSB7XG4gICAgdGhpcy5ET00uZWwgPSBET01fZWxcbiAgICB0aGlzLkRPTS5pbWFnZUNlbGxzID0gWy4uLnRoaXMuRE9NLmVsLnF1ZXJ5U2VsZWN0b3JBbGwoJy5ncmlkX19jZWxsLWltZycpXTtcbiAgICB0aGlzLkRPTS5pbWFnZUNlbGxzLmZvckVhY2goZWwgPT4gdGhpcy5pbWFnZUNlbGxBcnIucHVzaChuZXcgSW1hZ2VDZWxsKGVsKSkpXG4gICAgdGhpcy5ET00uY29udGVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5jb250ZW50Jyk7XG4gICAgLy8gdGhpcy5ET00uYmFja0N0cmwgPSB0aGlzLkRPTS5jb250ZW50LnF1ZXJ5U2VsZWN0b3IoJy5iYWNrJyk7INC00L7Qu9C20L3QviDQsdGL0YLRjCDQv9C+INGB0LrRgNC+0LvQu9GDXG4gICAgdGhpcy5ET00ubWluaUdyaWQuZWwgPSB0aGlzLkRPTS5jb250ZW50LnF1ZXJ5U2VsZWN0b3IoJy5ncmlkLS1taW5pJylcbiAgICB0aGlzLkRPTS5taW5pR3JpZC5jZWxscyA9IFsuLi50aGlzLkRPTS5taW5pR3JpZC5lbC5xdWVyeVNlbGVjdG9yQWxsKCcuZ3JpZF9fY2VsbCcpXTtcblxuICAgIHRoaXMuRE9NLm5hdmlnYXRpb24gPSB0aGlzLkRPTS5jb250ZW50LnF1ZXJ5U2VsZWN0b3IoJy5jb250ZW50X19uYXZpZ2F0aW9uJylcbiAgICB0aGlzLkRPTS5uYXZpZ2F0aW9uLmxlZnQgPSB0aGlzLkRPTS5uYXZpZ2F0aW9uLnF1ZXJ5U2VsZWN0b3IoJy5jb250ZW50X19uYXZpZ2F0aW9uLWxlZnQnKVxuICAgIHRoaXMuRE9NLm5hdmlnYXRpb24ucmlnaHQgPSB0aGlzLkRPTS5uYXZpZ2F0aW9uLnF1ZXJ5U2VsZWN0b3IoJy5jb250ZW50X19uYXZpZ2F0aW9uLXJpZ2h0JylcbiAgICB0aGlzLmN1cnJlbnRSb3RhdGlvbiA9IDBcblxuICAgIHRoaXMuRE9NLnBhZ2luYXRpb24gPSB0aGlzLkRPTS5jb250ZW50LnF1ZXJ5U2VsZWN0b3IoJy5jb250ZW50X19wYWdpbmF0aW9uJylcbiAgICB0aGlzLkRPTS5wYWdpbmF0aW9uLm51bWJlcnMgPSB0aGlzLkRPTS5jb250ZW50LnF1ZXJ5U2VsZWN0b3IoJy5jb250ZW50X19wYWdpbmF0aW9uLWNvbmF0aW5lcicpXG5cblxuICAgIC8vIFRleHQgYW5pbWF0aW9uINC/0YDQvtCy0LXRgNC40YLRjFxuICAgIHRoaXMudGV4dFJldmVhbCA9IG5ldyBUZXh0UmV2ZWFsKFsuLi50aGlzLkRPTS5lbC5xdWVyeVNlbGVjdG9yQWxsKCcub2gnKV0pO1xuXG4gICAgLy8gRXZlbnRzXG4gICAgdGhpcy5pbml0RXZlbnRzKCk7XG5cbiAgfVxuXG4gIGluaXRFdmVudHMoKSB7XG4gICAgZm9yIChjb25zdCBbcG9zaXRpb24sIGltYWdlQ2VsbF0gb2YgdGhpcy5pbWFnZUNlbGxBcnIuZW50cmllcygpKSB7XG5cbiAgICAgIC8vIE9wZW4gdGhlIGltYWdlQ2VsbCBhbmQgcmV2ZWFsIGl0cyBjb250ZW50XG4gICAgICBpbWFnZUNlbGwuRE9NLmVsLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuICAgICAgICBpZiAoIXRoaXMuaXNHcmlkVmlldyB8fCB0aGlzLmlzQW5pbWF0aW5nKSB7XG4gICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy5pc0FuaW1hdGluZyA9IHRydWU7XG4gICAgICAgIHRoaXMuaXNHcmlkVmlldyA9IGZhbHNlO1xuXG4gICAgICAgIC8vIFVwZGF0ZSB0aGUgbWluaSBncmlkIGN1cnJlbnQgY2VsbFxuICAgICAgICBpZiAodGhpcy5jdXJyZW50Q2VsbCAhPT0gLTEpIHtcbiAgICAgICAgICB0aGlzLkRPTS5taW5pR3JpZC5jZWxsc1t0aGlzLmN1cnJlbnRDZWxsXS5jbGFzc0xpc3QucmVtb3ZlKCdncmlkX19jZWxsLS1jdXJyZW50Jyk7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBVcGRhdGUgY3VycmVudENlbGxcbiAgICAgICAgdGhpcy5jdXJyZW50Q2VsbCA9IHBvc2l0aW9uO1xuICAgICAgICB0aGlzLkRPTS5taW5pR3JpZC5jZWxsc1t0aGlzLmN1cnJlbnRDZWxsXS5jbGFzc0xpc3QuYWRkKCdncmlkX19jZWxsLS1jdXJyZW50Jyk7XG5cbiAgICAgICAgdGhpcy5zaG93Q29udGVudChpbWFnZUNlbGwpO1xuICAgICAgfSk7XG5cbiAgICAgIC8vIEhvdmVyIG9uIHRoZSBpbWFnZSBjZWxsIHdpbGwgc2NhbGUgZG93biB0aGUgb3V0ZXIgZWxlbWVudCBhbmQgc2NhbGUgdXAgdGhlIGlubmVyIGVsZW1lbnQuXG4gICAgICBpbWFnZUNlbGwuRE9NLmVsLmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlZW50ZXInLCAoKSA9PiB7XG4gICAgICAgIGlmICghdGhpcy5pc0dyaWRWaWV3KSB7XG4gICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgICAgIGdzYXAua2lsbFR3ZWVuc09mKFtpbWFnZUNlbGwuRE9NLmVsLCBpbWFnZUNlbGwuRE9NLmlubmVyXSk7XG4gICAgICAgIGdzYXAudGltZWxpbmUoe1xuICAgICAgICAgIGRlZmF1bHRzOiB7XG4gICAgICAgICAgICBkdXJhdGlvbjogMi40LFxuICAgICAgICAgICAgZWFzZTogJ2V4cG8nXG4gICAgICAgICAgfVxuICAgICAgICB9KVxuICAgICAgICAgIC50byhpbWFnZUNlbGwuRE9NLmlubmVyLCB7XG4gICAgICAgICAgICBzY2FsZTogMS4xXG4gICAgICAgICAgfSwgMCk7XG4gICAgICB9KTtcblxuICAgICAgLy8gSG92ZXJpbmcgb3V0IHdpbGwgcmV2ZXJzZSB0aGUgc2NhbGUgdmFsdWVzLlxuICAgICAgaW1hZ2VDZWxsLkRPTS5lbC5hZGRFdmVudExpc3RlbmVyKCdtb3VzZWxlYXZlJywgKCkgPT4ge1xuICAgICAgICBpZiAoIXRoaXMuaXNHcmlkVmlldykge1xuICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuICAgICAgICBnc2FwLmtpbGxUd2VlbnNPZihbaW1hZ2VDZWxsLkRPTS5lbCwgaW1hZ2VDZWxsLkRPTS5pbm5lcl0pO1xuICAgICAgICBnc2FwLnRpbWVsaW5lKHtcbiAgICAgICAgICBkZWZhdWx0czoge1xuICAgICAgICAgICAgZHVyYXRpb246IDIuNCxcbiAgICAgICAgICAgIGVhc2U6ICdleHBvJ1xuICAgICAgICAgIH1cbiAgICAgICAgfSlcbiAgICAgICAgICAudG8oaW1hZ2VDZWxsLkRPTS5pbm5lciwge1xuICAgICAgICAgICAgc2NhbGU6IDFcbiAgICAgICAgICB9LCAwKTtcbiAgICAgIH0pXG4gICAgfVxuXG4gICAgLy8gQ2xvc2UgdGhlIGltYWdlQ2VsbCBhbmQgcmV2ZWFsIHRoZSBncmlkXG4gICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ3doZWVsJywgKCkgPT4ge1xuICAgICAgaWYgKCAhdGhpcy5pc0dyaWRWaWV3IHx8IHRoaXMuaXNBbmltYXRpbmcpIHtcblxuICAgICAgICB0aGlzLmlzQW5pbWF0aW5nID0gdHJ1ZTtcbiAgICAgICAgdGhpcy5pc0dyaWRWaWV3ID0gdHJ1ZTtcbiAgXG4gICAgICAgIHRoaXMuY2xvc2VDb250ZW50KCk7XG4gICAgICB9XG4gICAgfSk7XG4gICAgLy8gdGhpcy5ET00uY29udGVudC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcbiAgICAvLyAgIGlmICggdGhpcy5pc0FuaW1hdGluZyApIHtcbiAgICAvLyAgICAgcmV0dXJuIGZhbHNlO1xuICAgIC8vICAgfVxuICAgIC8vICAgdGhpcy5pc0FuaW1hdGluZyA9IHRydWU7XG4gICAgLy8gICB0aGlzLmlzR3JpZFZpZXcgPSB0cnVlO1xuXG4gICAgLy8gICB0aGlzLmNsb3NlQ29udGVudCgpO1xuICAgIC8vIH0pO1xuXG4gICAgaWYgKHRoaXMuaW1hZ2VDZWxsQXJyLmxlbmd0aCA+IDApIHtcbiAgICAgIHRoaXMuY3VycmVudENlbGwgPSAwO1xuICAgICAgdGhpcy5pc0dyaWRWaWV3ID0gZmFsc2U7XG4gICAgICB0aGlzLnNob3dDb250ZW50KHRoaXMuaW1hZ2VDZWxsQXJyWzBdKTtcbiAgICB9XG5cbiAgICB0aGlzLndoZWVsU2xpZGVzKCk7XG5cblxuXG4gICAgdGhpcy5ET00ubWluaUdyaWQuY2VsbHMuZm9yRWFjaCgoY2VsbCwgcG9zaXRpb24pID0+IHtcbiAgICAgIGNlbGwuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG4gICAgICAgIGlmICh0aGlzLmlzQW5pbWF0aW5nIHx8IHRoaXMuY3VycmVudENlbGwgPT09IHBvc2l0aW9uKSB7XG4gICAgICAgICAgcmV0dXJuIGZhbHNlXG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5pc0FuaW1hdGluZyA9IHRydWU7XG4gICAgICAgIHRoaXMuY2hhbmdlQ29udGVudChwb3NpdGlvbik7XG4gICAgICB9KTtcbiAgICB9KTtcblxuXG5cblxuICAgIC8vINCe0LHRgNCw0LHQvtGC0YfQuNC6INC00LvRjyDRgdGC0YDQtdC70LrQuCBcItCy0LvQtdCy0L5cIlxuXG4gICAgdGhpcy5ET00ubmF2aWdhdGlvbi5sZWZ0LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuICAgICAgaWYgKHRoaXMuaXNHcmlkVmlldyB8fCB0aGlzLmlzQW5pbWF0aW5nKSByZXR1cm4gZmFsc2UgXG5cblxuICAgICAgZ3NhcC50byhbdGhpcy5ET00ubmF2aWdhdGlvbi5sZWZ0LCB0aGlzLkRPTS5uYXZpZ2F0aW9uLnJpZ2h0XSwge1xuICAgICAgICByb3RhdGU6IHRoaXMuY3VycmVudFJvdGF0aW9uLFxuICAgICAgICBkdXJhdGlvbjogMS41LFxuICAgICAgICBlYXNlOiAnaG9wJ1xuICAgICAgfSlcblxuICAgICAgbGV0IG5ld1Bvc2l0aW9uID0gdGhpcy5jdXJyZW50Q2VsbCAtIDE7XG4gICAgICBpZiAobmV3UG9zaXRpb24gPCAwKSB7XG4gICAgICAgIG5ld1Bvc2l0aW9uID0gdGhpcy5pbWFnZUNlbGxBcnIubGVuZ3RoIC0gMTsgLy8g0JXRgdC70Lgg0Y3RgtC+INC/0LXRgNCy0LDRjyDRj9GH0LXQudC60LAsINC/0LXRgNC10LrQu9GO0YfQsNC10LzRgdGPINC90LAg0L/QvtGB0LvQtdC00L3RjtGOXG4gICAgICB9XG4gICAgICB0aGlzLmlzQW5pbWF0aW5nID0gdHJ1ZTtcbiAgICAgIHRoaXMuY2hhbmdlQ29udGVudChuZXdQb3NpdGlvbik7XG4gICAgfSk7XG5cbiAgICB0aGlzLkRPTS5uYXZpZ2F0aW9uLnJpZ2h0LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuICAgICAgaWYgKHRoaXMuaXNHcmlkVmlldyB8fCB0aGlzLmlzQW5pbWF0aW5nKSByZXR1cm4gZmFsc2UgXG5cblxuXG4gICAgICBnc2FwLnRvKFt0aGlzLkRPTS5uYXZpZ2F0aW9uLmxlZnQsIHRoaXMuRE9NLm5hdmlnYXRpb24ucmlnaHRdLCB7XG4gICAgICAgIHJvdGF0ZTogdGhpcy5jdXJyZW50Um90YXRpb24sXG4gICAgICAgIGR1cmF0aW9uOiAxLjUsXG4gICAgICAgIGVhc2U6ICdob3AnXG4gICAgICB9KVxuXG4gICAgICBsZXQgbmV3UG9zaXRpb24gPSB0aGlzLmN1cnJlbnRDZWxsICsgMTtcbiAgICAgIGlmIChuZXdQb3NpdGlvbiA+PSB0aGlzLmltYWdlQ2VsbEFyci5sZW5ndGgpIHtcbiAgICAgICAgbmV3UG9zaXRpb24gPSAwOyAvLyDQldGB0LvQuCDRjdGC0L4g0L/QvtGB0LvQtdC00L3Rj9GPINGP0YfQtdC50LrQsCwg0L/QtdGA0LXQutC70Y7Rh9Cw0LXQvNGB0Y8g0L3QsCDQv9C10YDQstGD0Y5cbiAgICAgIH1cbiAgICAgIHRoaXMuaXNBbmltYXRpbmcgPSB0cnVlO1xuICAgICAgdGhpcy5jaGFuZ2VDb250ZW50KG5ld1Bvc2l0aW9uKTtcbiAgICB9KTtcblxuICAgIC8vIFJlY2FsY3VsYXRlIGN1cnJlbnQgaW1hZ2UgdHJhbnNmb3JtXG4gICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ3Jlc2l6ZScsICgpID0+IHtcblxuICAgICAgLy8gY29uc3QgY3VycmVudEltYWdlQ2VsbCA9IHRoaXMuaW1hZ2VDZWxsQXJyW3RoaXMuY3VycmVudENlbGxdO1xuICAgICAgLy8gdGhpcy5pbWFnZXNSZXN0VHJhbnNmb3JtID0gdGhpcy5jYWxjT3RoZXJJbWFnZSgpO1xuICAgICAgLy8gdGhpcy5vdGhlckltYWdlQ2VsbHMgPSB0aGlzLmltYWdlQ2VsbEFyci5maWx0ZXIoY2VsbCA9PiBjZWxsICE9PSBjdXJyZW50SW1hZ2VDZWxsKTtcblxuICAgICAgLy8gLy8gY29uc29sZS5sb2codGhpcy5vdGhlckltYWdlQ2VsbHMpXG5cbiAgICAgIC8vIHRoaXMub3RoZXJJbWFnZUNlbGxzLmZvckVhY2goY2VsbCA9PiB7XG4gICAgICAvLyAgIGdzYXAuc2V0KGNlbGwuRE9NLmVsLCB7XG4gICAgICAvLyAgICAgd2lkdGg6IHRoaXMuaW1hZ2VzUmVzdFRyYW5zZm9ybS53aWR0aCxcbiAgICAgIC8vICAgICBoZWlnaHQ6IHRoaXMuaW1hZ2VzUmVzdFRyYW5zZm9ybS5oZWlnaHRcbiAgICAgIC8vICAgfSk7XG4gICAgICAvLyAgIGNvbnNvbGUubG9nKGNlbGwuRE9NLmVsLCB0aGlzLmltYWdlc1Jlc3RUcmFuc2Zvcm0ud2lkdGgpXG4gICAgICAvLyB9KTtcbiAgICAgIFxuICAgICAgaWYgKHRoaXMuaXNHcmlkVmlldykge1xuICAgICAgICAvLyB0aGlzLmltYWdlc1RyYW5zZm9ybSA9IHRoaXMuY2FsY090aGVySW1hZ2UoKTtcblxuICAgICAgICAvLyBjb25zb2xlLmxvZyh0aGlzLm90aGVySW1hZ2VDZWxscylcbiAgXG4gICAgICAgIC8vIHRoaXMuaW1hZ2VDZWxsQXJyLmZvckVhY2goY2VsbCA9PiB7XG4gICAgICAgIC8vICAgZ3NhcC5zZXQoY2VsbC5ET00uZWwsIHtcbiAgICAgICAgLy8gICAgIHdpZHRoOiB0aGlzLmltYWdlc1RyYW5zZm9ybS53aWR0aCxcbiAgICAgICAgLy8gICAgIGhlaWdodDogdGhpcy5pbWFnZXNUcmFuc2Zvcm0uaGVpZ2h0XG4gICAgICAgIC8vICAgfSk7XG4gICAgICAgIC8vICAgY29uc29sZS5sb2coY2VsbC5ET00uZWwpXG4gICAgICAgIC8vIH0pO1xuXG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgIH1cblxuICAgICAgLy8gQ2FsY3VsYXRlIHRoZSB0cmFuc2Zvcm0gdG8gYXBwbHkgdG8gdGhlIGltYWdlIGNlbGxcblxuICAgICAgY29uc3QgY3VycmVudEltYWdlQ2VsbCA9IHRoaXMuaW1hZ2VDZWxsQXJyW3RoaXMuY3VycmVudENlbGxdO1xuICAgICAgY29uc3QgaW1hZ2VUcmFuc2Zvcm0gPSB0aGlzLmNhbGNUcmFuc2Zvcm1JbWFnZSgpO1xuICAgICAgZ3NhcC5zZXQoY3VycmVudEltYWdlQ2VsbC5ET00uZWwsIHtcbiAgICAgICAgLy8gc2NhbGU6IGltYWdlVHJhbnNmb3JtLnNjYWxlLFxuICAgICAgICB4OiBpbWFnZVRyYW5zZm9ybS54IC0gMjAsXG4gICAgICAgIHk6IGltYWdlVHJhbnNmb3JtLnkgLSAxMCxcbiAgICAgICAgd2lkdGg6IHdpbmRvdy5pbm5lcldpZHRoICsgNDAsXG4gICAgICAgIGhlaWdodDogd2luZG93LmlubmVySGVpZ2h0ICsgMjAsXG4gICAgICB9KTtcbiAgICB9KTtcbiAgICBcbiAgfVxuXG5cbiAgLyoqXG4gICAqIFNjYWxlIHVwIHRoZSBpbWFnZSBhbmQgcmV2ZWFsIGl0cyBjb250ZW50LlxuICAgKiBAcGFyYW0ge0ltYWdlQ2VsbH0gaW1hZ2VDZWxsIC0gdGhlIGltYWdlQ2VsbCBlbGVtZW50LlxuICAgKi9cblxuICBzaG93Q29udGVudChpbWFnZUNlbGwpIHtcbiAgICBjb25zdCBpbWFnZXNSZXN0VHJhbnNmb3JtID0gdGhpcy5jYWxjT3RoZXJJbWFnZSgpO1xuICAgIGNvbnN0IGltYWdlVHJhbnNmb3JtID0gdGhpcy5jYWxjVHJhbnNmb3JtSW1hZ2UoKTtcbiAgICB0aGlzLm90aGVySW1hZ2VDZWxscyA9IHRoaXMuRE9NLmltYWdlQ2VsbHMuZmlsdGVyKGVsID0+IGVsICE9IGltYWdlQ2VsbC5ET00uZWwpO1xuXG4gICAgZ3NhcC5raWxsVHdlZW5zT2YoW2ltYWdlQ2VsbC5ET00uZWwsIGltYWdlQ2VsbC5ET00uaW5uZXIsIHRoaXMub3RoZXJJbWFnZUNlbGxzXSk7XG4gICAgZ3NhcC50aW1lbGluZSh7XG4gICAgICBkZWZhdWx0czoge1xuICAgICAgICBkdXJhdGlvbjogMS4yLFxuICAgICAgICBlYXNlOiAnaG9wJ1xuICAgICAgfSxcbiAgICAgIG9uU3RhcnQ6ICgpID0+IGJvZHlFbC5jbGFzc0xpc3QuYWRkKCdvaCcpLFxuICAgICAgb25Db21wbGV0ZTogKCkgPT4ge1xuICAgICAgICB0aGlzLmlzQW5pbWF0aW5nID0gZmFsc2U7XG4gICAgICB9XG4gICAgfSlcbiAgICAgIC5hZGRMYWJlbCgnc3RhcnQnLCAwKVxuICAgICAgLmFkZCgoKSA9PiB7XG4gICAgICAgIHRoaXMudGV4dFJldmVhbC5vdXQoKTtcbiAgICAgIH0sICdzdGFydCcpXG4gICAgICAuc2V0KHRoaXMuRE9NLmVsLCB7XG4gICAgICAgIHBvaW50ZXJFdmVudHM6ICdub25lJ1xuICAgICAgfSwgJ3N0YXJ0JylcbiAgICAgIC5zZXQoaW1hZ2VDZWxsLkRPTS5lbCwge1xuICAgICAgICB6SW5kZXg6IDEwMFxuICAgICAgfSwgJ3N0YXJ0JylcbiAgICAgIC5zZXQoW2ltYWdlQ2VsbC5ET00uZWwsIGltYWdlQ2VsbC5ET00uaW5uZXIsIHRoaXMub3RoZXJJbWFnZUNlbGxzXSwge1xuICAgICAgICB3aWxsQ2hhbmdlOiAndHJhbnNmb3JtLCBvcGFjaXR5J1xuICAgICAgfSwgJ3N0YXJ0JylcbiAgICAgIC50byhpbWFnZUNlbGwuRE9NLmVsLCB7XG4gICAgICAgIC8vIHNjYWxlOiBpbWFnZVRyYW5zZm9ybS5zY2FsZSxcbiAgICAgICAgeDogaW1hZ2VUcmFuc2Zvcm0ueCAtIDIwLFxuICAgICAgICB5OiBpbWFnZVRyYW5zZm9ybS55IC0gMTAsXG4gICAgICAgIHdpZHRoOiB3aW5kb3cuaW5uZXJXaWR0aCArIDQwLFxuICAgICAgICBoZWlnaHQ6IHdpbmRvdy5pbm5lckhlaWdodCArIDIwLFxuICAgICAgICBvbkNvbXBsZXRlOiAoKSA9PiBnc2FwLnNldChpbWFnZUNlbGwuRE9NLmVsLCB7XG4gICAgICAgICAgd2lsbENhbmdlOiAnJ1xuICAgICAgICB9KVxuICAgICAgfSwgJ3N0YXJ0JylcbiAgICAgIC50byhpbWFnZUNlbGwuRE9NLmlubmVyLCB7XG4gICAgICAgIHNjYWxlOiAxLFxuICAgICAgICBvbkNvbXBsZXRlOiAoKSA9PiBnc2FwLnNldChpbWFnZUNlbGwuRE9NLmlubmVyLCB7XG4gICAgICAgICAgd2lsbENoYW5nZTogJydcbiAgICAgICAgfSlcbiAgICAgIH0sICdzdGFydCcpXG4gICAgICAudG8odGhpcy5vdGhlckltYWdlQ2VsbHMsIHtcbiAgICAgICAgb3BhY2l0eTogMCxcbiAgICAgICAgc2NhbGU6IDAuOCxcbiAgICAgICAgb25Db21wbGV0ZTogKCkgPT4gZ3NhcC5zZXQodGhpcy5vdGhlckltYWdlQ2VsbHMsIHtcbiAgICAgICAgICB3aWxsQ2hhbmdlOiAnJ1xuICAgICAgICB9KSxcbiAgICAgICAgc3RhZ2dlcjoge1xuICAgICAgICAgIGdyaWQ6ICdhdXRvJyxcbiAgICAgICAgICBhbW91bnQ6IDAuMTcsXG4gICAgICAgICAgZnJvbTogdGhpcy5jdXJyZW50Q2VsbFxuICAgICAgICB9XG4gICAgICB9LCAnc3RhcnQnKVxuICAgICAgLnNldCh0aGlzLkRPTS5wYWdpbmF0aW9uLm51bWJlcnMsIHtcbiAgICAgICAgeTogYCR7LTIwICogKHRoaXMuY3VycmVudENlbGwpfSVgLFxuICAgICAgfSwgJ3N0YXJ0JylcbiAgICAgIC5hZGRMYWJlbCgnc2hvd0NvbnRlbnQnLCAnc3RhcnQrPTAuNDUnKVxuICAgICAgLnNldCh0aGlzLkRPTS5taW5pR3JpZC5lbCwge1xuICAgICAgICBvcGFjaXR5OiAxXG4gICAgICB9LCAnc2hvd0NvbnRlbnQnKVxuICAgICAgLnNldCh0aGlzLkRPTS5taW5pR3JpZC5jZWxscywge1xuICAgICAgICBvcGFjaXR5OiAwLFxuICAgICAgICB5OiAnMTAwJSdcbiAgICAgIH0sICdzaG93Q29udGVudCcpXG4gICAgICAudG8odGhpcy5ET00ubWluaUdyaWQuY2VsbHMsIHtcbiAgICAgICAgZHVyYXRpb246IDEsXG4gICAgICAgIGVhc2U6ICdleHBvJyxcbiAgICAgICAgb3BhY2l0eTogMSxcbiAgICAgICAgeTogMCxcbiAgICAgICAgc3RhcnRBdDoge1xuICAgICAgICAgIHNjYWxlOiAwLjhcbiAgICAgICAgfSxcbiAgICAgICAgc2NhbGU6IDEsXG4gICAgICAgIHN0YWdnZXI6IHtcbiAgICAgICAgICBncmlkOiAnYXV0bycsXG4gICAgICAgICAgYW1vdW50OiAwLjMsXG4gICAgICAgICAgZnJvbTogdGhpcy5jdXJyZW50Q2VsbFxuICAgICAgICB9XG4gICAgICB9LCAnc2hvd0NvbnRlbnQrPTAuMicpXG4gICAgICAudG8oW3RoaXMuRE9NLm5hdmlnYXRpb24ubGVmdCwgdGhpcy5ET00ubmF2aWdhdGlvbi5yaWdodF0sIHtcbiAgICAgICAgZHVyYXRpb246IDEsXG4gICAgICAgIGVhc2U6ICdleHBvJyxcbiAgICAgICAgb3BhY2l0eTogMSxcbiAgICAgICAgc2NhbGU6IDEsXG4gICAgICB9LCAnc2hvd0NvbnRlbnQrPTAuMicpXG4gICAgICAudG8odGhpcy5ET00ucGFnaW5hdGlvbiwge1xuICAgICAgICBkdXJhdGlvbjogMC41LFxuICAgICAgICB5OiAnMCUnLFxuICAgICAgICBvcGFjaXR5OiAxLFxuICAgICAgICBlYXNlOiAnZXhwby5pbicsXG4gICAgICB9LCAnc2hvd0NvbnRlbnQrPTAuMicpXG4gICAgICAuYWRkKCgpID0+IHtcbiAgICAgICAgaW1hZ2VDZWxsLmNvbnRlbnRJdGVtLnRleHRSZXZlYWwuaW4oKTtcbiAgICAgICAgdGhpcy5ET00uY29udGVudC5jbGFzc0xpc3QuYWRkKCdjb250ZW50LS1vcGVuJyk7XG4gICAgICB9LCAnc2hvd0NvbnRlbnQnKVxuICAgICAgLmFkZCgoKSA9PiBpbWFnZUNlbGwuY29udGVudEl0ZW0uRE9NLmVsLmNsYXNzTGlzdC5hZGQoJ2NvbnRlbnRfX2l0ZW0tLWN1cnJlbnQnKSwgJ3Nob3dDb250ZW50Kz0wLjAyJylcbiAgfVxuXG4gIC8qKlxuICAgKiBTY2FsZSBkb3duIHRoZSBpbWFnZSBhbmQgcmV2ZWFsIHRoZSBncmlkIGFnYWluLlxuICAgKi9cbiAgY2xvc2VDb250ZW50KCkge1xuICAgIGNvbnN0IGltYWdlQ2VsbCA9IHRoaXMuaW1hZ2VDZWxsQXJyW3RoaXMuY3VycmVudENlbGxdO1xuICAgIHRoaXMub3RoZXJJbWFnZUNlbGxzID0gdGhpcy5ET00uaW1hZ2VDZWxscy5maWx0ZXIoZWwgPT4gZWwgIT0gaW1hZ2VDZWxsLkRPTS5lbCk7XG5cbiAgICAvLyBjb25zdCBpbWFnZXNSZXN0VHJhbnNmb3JtID0gdGhpcy5jYWxjT3RoZXJJbWFnZSgpO1xuXG4gICAgZ3NhcC50aW1lbGluZSh7XG4gICAgICBkZWZhdWx0czoge1xuICAgICAgICBkdXJhdGlvbjogMSxcbiAgICAgICAgZWFzZTogJ2hvcCdcbiAgICAgIH0sXG4gICAgICBvblN0YXJ0OiAoKSA9PiBib2R5RWwuY2xhc3NMaXN0LnJlbW92ZSgnb2gnKSxcbiAgICAgIG9uQ29tcGxldGU6ICgpID0+IHtcbiAgICAgICAgdGhpcy5pc0FuaW1hdGluZyA9IGZhbHNlO1xuICAgICAgfVxuICAgIH0pXG4gICAgICAuYWRkTGFiZWwoJ3N0YXJ0JywgMClcbiAgICAgIC50byhbdGhpcy5ET00ubmF2aWdhdGlvbi5sZWZ0LCB0aGlzLkRPTS5uYXZpZ2F0aW9uLnJpZ2h0XSwge1xuICAgICAgICBkdXJhdGlvbjogMC41LFxuICAgICAgICBlYXNlOiAnZXhwby5pbicsXG4gICAgICAgIHNjYWxlOiAwLFxuICAgICAgfSwgJ3N0YXJ0JylcbiAgICAgIC50byh0aGlzLkRPTS5wYWdpbmF0aW9uLCB7XG4gICAgICAgIGR1cmF0aW9uOiAwLjUsXG4gICAgICAgIHk6ICcxMCUnLFxuICAgICAgICBvcGFjaXR5OiAwLFxuICAgICAgICBlYXNlOiAnZXhwby5pbicsXG4gICAgICB9LCAnc3RhcnQnKVxuICAgICAgLnRvKHRoaXMuRE9NLm1pbmlHcmlkLmNlbGxzLCB7XG4gICAgICAgIGR1cmF0aW9uOiAwLjUsXG4gICAgICAgIGVhc2U6ICdleHBvLmluJyxcbiAgICAgICAgb3BhY2l0eTogMCxcbiAgICAgICAgeTogJzEwMCUnLFxuICAgICAgICBzdGFnZ2VyOiB7XG4gICAgICAgICAgZ3JpZDogJ2F1dG8nLFxuICAgICAgICAgIGFtb3VudDogMC4xLFxuICAgICAgICAgIGZyb206IC10aGlzLmN1cnJlbnRDZWxsXG4gICAgICAgIH0sXG4gICAgICAgIG9uQ29tcGxldGU6ICgpID0+IHtcbiAgICAgICAgICBnc2FwLnNldCh0aGlzLkRPTS5taW5pR3JpZC5lbCwge1xuICAgICAgICAgICAgb3BhY2l0eTogMFxuICAgICAgICAgIH0pXG4gICAgICAgIH1cbiAgICAgIH0sICdzdGFydCcpXG4gICAgICAuYWRkKCgpID0+IHtcbiAgICAgICAgaW1hZ2VDZWxsLmNvbnRlbnRJdGVtLnRleHRSZXZlYWwub3V0KCk7XG4gICAgICAgIHRoaXMuRE9NLmNvbnRlbnQuY2xhc3NMaXN0LnJlbW92ZSgnY29udGVudC0tb3BlbicpO1xuICAgICAgfSwgJ3N0YXJ0JylcbiAgICAgIC5hZGQoKCkgPT4gaW1hZ2VDZWxsLmNvbnRlbnRJdGVtLkRPTS5lbC5jbGFzc0xpc3QucmVtb3ZlKCdjb250ZW50X19pdGVtLS1jdXJyZW50JykpXG4gICAgICAuYWRkTGFiZWwoJ3Nob3dncmlkJywgMClcbiAgICAgIC5zZXQoW2ltYWdlQ2VsbC5ET00uZWwsIHRoaXMub3RoZXJJbWFnZUNlbGxzXSwge1xuICAgICAgICB3aWxsQ2hhbmdlOiAndHJhbnNmb3JtLCBvcGFjaXR5J1xuICAgICAgfSwgJ3Nob3dHcmlkJylcbiAgICAgIC50byhpbWFnZUNlbGwuRE9NLmVsLCB7XG4gICAgICAgIHg6IDAsXG4gICAgICAgIHk6IDAsXG4gICAgICAgIHdpZHRoOiB0aGlzLm90aGVySW1hZ2VDZWxsc1swXS5vZmZzZXRXaWR0aCxcbiAgICAgICAgaGVpZ2h0OiB0aGlzLm90aGVySW1hZ2VDZWxsc1swXS5vZmZzZXRIZWlnaHQsXG4gICAgICAgIHpJbmRleDogMTAwLFxuICAgICAgICBvbkNvbXBsZXRlOiAoKSA9PiB7XG4gICAgICAgICAgZ3NhcC5zZXQoaW1hZ2VDZWxsLkRPTS5lbCwge1xuICAgICAgICAgICAgd2lkdGg6ICdjYWxjKDEwMCUgLSB2YXIoLS1ncmlkLXBhZGRpbmcpICogMiknLFxuICAgICAgICAgICAgaGVpZ2h0OiAnY2FsYygxMDAlIC0gdmFyKC0tZ3JpZC1wYWRkaW5nKSAqIDIpJyxcbiAgICAgICAgICAgIHdpbGxDaGFuZ2U6ICcnLFxuICAgICAgICAgICAgekluZGV4OiAxXG4gICAgICAgIH0pXG4gICAgICB9XG4gICAgICB9LCAnc2hvd0dyaWQnKVxuICAgICAgLnRvKHRoaXMub3RoZXJJbWFnZUNlbGxzLCB7XG4gICAgICAgIG9wYWNpdHk6IDEsXG4gICAgICAgIHNjYWxlOiAxLFxuICAgICAgICBvbkNvbXBsZXRlOiAoKSA9PiB7XG4gICAgICAgICAgZ3NhcC5zZXQodGhpcy5vdGhlckltYWdlQ2VsbHMsIHtcbiAgICAgICAgICAgIHdpbGxDaGFuZ2U6ICcnXG4gICAgICAgICAgfSk7XG4gICAgICAgICAgZ3NhcC5zZXQodGhpcy5ET00uZWwsIHtcbiAgICAgICAgICAgIHBvaW50ZXJFdmVudHM6ICdhdXRvJ1xuICAgICAgICAgIH0pXG4gICAgICAgIH0sXG4gICAgICAgIHN0YWdnZXI6IHtcbiAgICAgICAgICBncmlkOiAnYXV0bycsXG4gICAgICAgICAgYW1vdW50OiAwLjE3LFxuICAgICAgICAgIGZyb206IC10aGlzLmN1cnJlbnRDZWxsXG4gICAgICAgIH1cbiAgICAgIH0sICdzaG93R3JpZCcpXG4gICAgICAuYWRkKCgpID0+IHtcbiAgICAgICAgdGhpcy50ZXh0UmV2ZWFsLmluKCk7XG4gICAgICB9LCAnc2hvd0dyaWQrPTAuMycpXG4gIH1cblxuICAvKipcbiAgICogQ2hhbmdlIGVsZW1lbnRzIHdoZW4gdGhlIGNvbnRlbnQgaXMgb3BlblxuICAgKi9cblxuICBjaGFuZ2VDb250ZW50KHBvc2l0aW9uKSB7XG4gICAgY29uc3QgaW1hZ2VDZWxsID0gdGhpcy5pbWFnZUNlbGxBcnJbdGhpcy5jdXJyZW50Q2VsbF07XG4gICAgY29uc3QgdXBjb21pbmdJbWFnZUNlbGwgPSB0aGlzLmltYWdlQ2VsbEFycltwb3NpdGlvbl07XG4gICAgY29uc3QgaW5uZXJJbWFnZSA9IGltYWdlQ2VsbC5ET00uZWwucXVlcnlTZWxlY3RvcignaW1nJyk7XG4gICAgY29uc3QgdXBjb21pbmdJbm5lckltYWdlID0gdXBjb21pbmdJbWFnZUNlbGwuRE9NLmVsLnF1ZXJ5U2VsZWN0b3IoJ2ltZycpXG5cbiAgICAvLyDQntCx0L3QvtCy0LvQtdC90LjQtSDRgtC10LrRg9GJ0LXQuSDRj9GH0LXQudC60Lgg0LIg0LzQuNC90Lgt0YHQtdGC0LrQtVxuICAgIHRoaXMuRE9NLm1pbmlHcmlkLmNlbGxzW3RoaXMuY3VycmVudENlbGxdLmNsYXNzTGlzdC5yZW1vdmUoJ2dyaWRfX2NlbGwtLWN1cnJlbnQnKTtcbiAgICB0aGlzLmN1cnJlbnRDZWxsID0gcG9zaXRpb247XG4gICAgdGhpcy5ET00ubWluaUdyaWQuY2VsbHNbdGhpcy5jdXJyZW50Q2VsbF0uY2xhc3NMaXN0LmFkZCgnZ3JpZF9fY2VsbC0tY3VycmVudCcpO1xuXG4gICAgLy8g0JLRi9GH0LjRgdC70LXQvdC40LUg0YLRgNCw0L3RgdGE0L7RgNC80LDRhtC40Lgg0LTQu9GPINC90L7QstC+0LPQviDQuNC30L7QsdGA0LDQttC10L3QuNGPXG4gICAgY29uc3QgaW1hZ2VUcmFuc2Zvcm0gPSB0aGlzLmNhbGNUcmFuc2Zvcm1JbWFnZSgpO1xuXG4gICAgY29uc3QgY3VycmVudE51bWJlclBvc2l0aW9uID0gaW1hZ2VDZWxsLmNvbnRlbnRJZC5yZXBsYWNlKC9cXEQvZywgJycpO1xuICAgIGNvbnN0IHVwY29taW5nTnVtYmVyUG9zaXRpb24gPSB1cGNvbWluZ0ltYWdlQ2VsbC5jb250ZW50SWQucmVwbGFjZSgvXFxEL2csICcnKTtcbiAgICBjb25zdCBkaXJlY3Rpb24gPSB1cGNvbWluZ051bWJlclBvc2l0aW9uIDwgY3VycmVudE51bWJlclBvc2l0aW9uID8gJ2xlZnQnIDogJ3JpZ2h0JztcblxuICAgIGlmIChkaXJlY3Rpb24gPT09ICdyaWdodCcpIHtcbiAgICAgIHRoaXMuY3VycmVudFJvdGF0aW9uICs9IDkwO1xuICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMuY3VycmVudFJvdGF0aW9uIC09IDkwO1xuICAgIH1cblxuICAgIGdzYXAudGltZWxpbmUoe1xuICAgICAgZGVmYXVsdHM6IHtcbiAgICAgICAgZHVyYXRpb246IDEuNSxcbiAgICAgICAgZWFzZTogJ2hvcCdcbiAgICAgIH0sXG4gICAgICBvbkNvbXBsZXRlOiAoKSA9PiB7XG4gICAgICAgIHRoaXMuaXNBbmltYXRpbmcgPSBmYWxzZTtcbiAgICAgIH1cbiAgICB9KVxuICAgICAgLmFkZExhYmVsKCdzdGFydCcsIDApXG4gICAgICAuYWRkKGltYWdlQ2VsbC5jb250ZW50SXRlbS50ZXh0UmV2ZWFsLm91dCgpLCAnc3RhcnQnKVxuICAgICAgLmFkZCgoKSA9PiB7XG4gICAgICAgIGltYWdlQ2VsbC5jb250ZW50SXRlbS5ET00uZWwuY2xhc3NMaXN0LnJlbW92ZSgnY29udGVudF9faXRlbS0tY3VycmVudCcpO1xuICAgICAgfSlcbiAgICAgIC5zZXQoW2ltYWdlQ2VsbC5ET00uZWwsIHVwY29taW5nSW1hZ2VDZWxsLkRPTS5lbF0sIHtcbiAgICAgICAgd2lsbENoYW5nZTogJ3RyYW5zZm9ybSwgb3BhY2l0eSdcbiAgICAgIH0sICdzdGFydCcpXG4gICAgICAuc2V0KGltYWdlQ2VsbC5ET00uZWwsIHtcbiAgICAgICAgY2xpcFBhdGg6IGRpcmVjdGlvbiA9PT0gJ3JpZ2h0JyA/IFwicG9seWdvbigwJSAwJSwgMTAwJSAwJSwgMTAwJSAxMDAlLCAwJSAxMDAlKVwiIDogXCJwb2x5Z29uKDEwMCUgMCUsIDAlIDAlLCAwJSAxMDAlLCAxMDAlIDEwMCUpXCIsXG4gICAgICB9LCdzdGFydCcpXG4gICAgICAuc2V0KHVwY29taW5nSW1hZ2VDZWxsLkRPTS5lbCwge1xuICAgICAgICBjbGlwUGF0aDogZGlyZWN0aW9uID09PSAncmlnaHQnID8gXCJwb2x5Z29uKDEwMCUgMCUsIDEwMCUgMCUsIDEwMCUgMTAwJSwgMTAwJSAxMDAlKVwiIDogXCJwb2x5Z29uKDAlIDAlLCAwJSAwJSwgMCUgMTAwJSwgMCUgMTAwJSlcIixcbiAgICAgICAgeDogaW1hZ2VUcmFuc2Zvcm0ueCAtIDIwLFxuICAgICAgICB5OiBpbWFnZVRyYW5zZm9ybS55IC0gMTAsXG4gICAgICAgIHdpZHRoOiB3aW5kb3cuaW5uZXJXaWR0aCArIDQwLFxuICAgICAgICBoZWlnaHQ6IHdpbmRvdy5pbm5lckhlaWdodCArIDIwLFxuICAgICAgICBzY2FsZTogMVxuICAgICAgfSwnc3RhcnQnKVxuICAgICAgLnNldCh1cGNvbWluZ0lubmVySW1hZ2UsIHtcbiAgICAgICAgeDogZGlyZWN0aW9uID09PSAncmlnaHQnID8gMjUwIDogLTI1MCxcbiAgICAgICAgekluZGV4OiAyLFxuICAgICAgfSwnc3RhcnQnKVxuICAgICAgLnRvKFt0aGlzLkRPTS5uYXZpZ2F0aW9uLmxlZnQsIHRoaXMuRE9NLm5hdmlnYXRpb24ucmlnaHRdLCB7XG4gICAgICAgIHJvdGF0ZTogdGhpcy5jdXJyZW50Um90YXRpb24sXG4gICAgICAgIGR1cmF0aW9uOiAxLjUsXG4gICAgICAgIGVhc2U6ICdob3AnXG4gICAgICB9LCAnc3RhcnQnKVxuICAgICAgLnRvKGltYWdlQ2VsbC5ET00uZWwsIHtcbiAgICAgICAgY2xpcFBhdGg6IGRpcmVjdGlvbiA9PT0gJ3JpZ2h0JyA/IFwicG9seWdvbigwJSAwJSwgMCUgMCUsIDAlIDEwMCUsIDAlIDEwMCUpXCIgOiBcInBvbHlnb24oMTAwJSAwJSwgMTAwJSAwJSwgMTAwJSAxMDAlLCAxMDAlIDEwMCUpXCIsXG5cbiAgICAgICAgLy8gb25Db21wbGV0ZTogKCkgPT4gZ3NhcC5zZXQoaW1hZ2VDZWxsLkRPTS5lbCwgeyBvcGFjaXR5OiAwIH0pXG4gICAgICB9LCAnc3RhcnQnKVxuICAgICAgLnRvKGlubmVySW1hZ2UsIHtcbiAgICAgICAgeDogZGlyZWN0aW9uID09PSAncmlnaHQnID8gLTUwMCA6IDUwMCxcbiAgICAgICAgZHVyYXRpb246IDEuNSxcbiAgICAgICAgZWFzZTogJ2hvcCdcbiAgICAgIH0sICdzdGFydCcpXG4gICAgICAudG8odXBjb21pbmdJbWFnZUNlbGwuRE9NLmVsLCB7XG4gICAgICAgIGNsaXBQYXRoOiBkaXJlY3Rpb24gPT09ICdyaWdodCcgPyBcInBvbHlnb24oMTAwJSAwJSwgMCUgMCUsIDAlIDEwMCUsIDEwMCUgMTAwJSlcIiA6IFwicG9seWdvbigwJSAwJSwgMTAwJSAwJSwgMTAwJSAxMDAlLCAwJSAxMDAlKVwiLFxuICAgICAgICBvcGFjaXR5OiAxLFxuICAgICAgICBvbkNvbXBsZXRlOiAoKSA9PiB7XG4gICAgICAgICAgZ3NhcC5zZXQoW2ltYWdlQ2VsbC5ET00uZWwsIHVwY29taW5nSW1hZ2VDZWxsLkRPTS5lbF0sIHtcbiAgICAgICAgICAgIHdpbGxDaGFuZ2U6ICcnXG4gICAgICAgICAgfSlcbiAgICAgICAgICBnc2FwLnNldChpbWFnZUNlbGwuRE9NLmVsLCB7XG4gICAgICAgICAgICBjbGlwUGF0aDogbnVsbCxcbiAgICAgICAgICAgIHg6IDAsXG4gICAgICAgICAgICB5OiAwLFxuICAgICAgICAgICAgc2NhbGU6IDAuOCxcbiAgICAgICAgICAgIHdpZHRoOiAnY2FsYygxMDAlIC0gdmFyKC0tZ3JpZC1wYWRkaW5nKSAqIDIpJyxcbiAgICAgICAgICAgIGhlaWdodDogJ2NhbGMoMTAwJSAtIHZhcigtLWdyaWQtcGFkZGluZykgKiAyKScsXG4gICAgICAgICAgICBvcGFjaXR5OiAwLFxuICAgICAgICAgICAgekluZGV4OiBudWxsLFxuICAgICAgICAgIH0sJ3N0YXJ0Jyk7XG4gICAgICAgICAgZ3NhcC5zZXQoaW5uZXJJbWFnZSwge1xuICAgICAgICAgICAgeDogMFxuICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICB9LCAnc3RhcnQnKVxuICAgICAgLnRvKHVwY29taW5nSW5uZXJJbWFnZSwge1xuICAgICAgICB4OiAwLFxuICAgICAgICBkdXJhdGlvbjogMS41LFxuICAgICAgICBlYXNlOiAnaG9wJyxcbiAgICAgIH0sICdzdGFydCcpXG4gICAgICAudG8odGhpcy5ET00ucGFnaW5hdGlvbi5udW1iZXJzLCB7XG4gICAgICAgIHk6IGAkey0yMCAqICh0aGlzLmN1cnJlbnRDZWxsKX0lYCwgIC8vINCh0LzQtdGJ0LDQtdC8INC60L7QvdGC0LXQudC90LXRgCDQstCy0LXRgNGFINC90LAgMjAlINC90LAg0LrQsNC20LTRi9C5INC40L3QtNC10LrRgVxuICAgICAgICBkdXJhdGlvbjogMS41LFxuICAgICAgICBlYXNlOiAnaG9wJyxcbiAgICAgIH0sICdzdGFydCcpXG4gICAgICAuYWRkTGFiZWwoJ3Nob3dDb250ZW50JywgJz4tPTAuNCcpXG4gICAgICAuYWRkKCgpID0+IHtcbiAgICAgICAgdXBjb21pbmdJbWFnZUNlbGwuY29udGVudEl0ZW0udGV4dFJldmVhbC5pbigpO1xuICAgICAgfSwgJ3Nob3dDb250ZW50JylcbiAgICAgIC5hZGQoKCkgPT4ge1xuICAgICAgICB1cGNvbWluZ0ltYWdlQ2VsbC5jb250ZW50SXRlbS5ET00uZWwuY2xhc3NMaXN0LmFkZCgnY29udGVudF9faXRlbS0tY3VycmVudCcpO1xuICAgICAgfSwgJ3Nob3dDb250ZW50Kz0wLjAyJylcbiAgICAgIFxuXG4gICAgICAvLyDQstC+0YIg0YLRg9GCINC/0L7QtNGD0LzQsNGC0YxcbiAgICAgIC8vIC5zZXQoaW1hZ2VDZWxsLkRPTS5lbCwge1xuICAgICAgLy8gICB4OiAwLFxuICAgICAgLy8gICB5OiAwLFxuICAgICAgLy8gICB3aWR0aDogdGhpcy5vdGhlckltYWdlQ2VsbHNbMF0ub2Zmc2V0V2lkdGgsXG4gICAgICAvLyAgIGhlaWdodDogdGhpcy5vdGhlckltYWdlQ2VsbHNbMF0ub2Zmc2V0SGVpZ2h0LFxuICAgICAgLy8gICBjbGlwUGF0aDogbnVsbCxcbiAgICAgIC8vICAgLy8gd2lsbENoYW5nZTogJycsXG4gICAgICAvLyAgIHpJbmRleDogMSxcbiAgICAgIC8vICAgb25Db21wbGV0ZTogKCkgPT4ge1xuICAgICAgLy8gICAgIGdzYXAuc2V0KGlubmVySW1hZ2UsIHtcbiAgICAgIC8vICAgICAgIHg6IDAsXG4gICAgICAvLyAgICAgfSwnc2hvd0NvbnRlbnQrPTAuMDQnKVxuICAgICAgLy8gICB9XG4gICAgICAvLyB9LCdzaG93Q29udGVudCs9MC4wMicpXG4gIH1cblxuXG4gIHdoZWVsU2xpZGVzKCkge1xuICAgIC8vIGlmICggIXRoaXMuaXNHcmlkVmlldyB8fCB0aGlzLmlzQW5pbWF0aW5nKSB7XG4gICAgLy8gICByZXR1cm4gZmFsc2U7XG4gICAgLy8gfVxuICAgIGNvbnN0IHRyYWNrID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2ltYWdlLXRyYWNrJyk7XG5cbiAgICAvLyB3aW5kb3cub25tb3VzZWRvd24gPSBlID0+IHtcbiAgICAvLyAgIHRyYWNrLmRhdGFzZXQubW91c2VEb3duQXQgPSBlLmNsaWVudFg7XG4gICAgLy8gfVxuXG4gICAgLy8gd2luZG93Lm9ubW91c2V1cCA9ICgpID0+IHtcbiAgICAvLyAgIHRyYWNrLmRhdGFzZXQubW91c2VEb3duQXQgPSBcIjBcIjtcbiAgICAvLyAgIHRyYWNrLmRhdGFzZXQucHJldlBlcmNlbnRhZ2UgPSB0cmFjay5kYXRhc2V0LnBlcmNlbnRhZ2U7XG4gICAgLy8gfVxuXG4gICAgLy8gd2luZG93Lm9ubW91c2Vtb3ZlID0gZSA9PiB7XG4gICAgLy8gICBpZiAodHJhY2suZGF0YXNldC5tb3VzZURvd25BdCA9PT0gXCIwXCIgKSByZXR1cm47XG5cbiAgICAvLyAgIGNvbnN0IG1vdXNlRGVsdGEgPSBwYXJzZUZsb2F0KHRyYWNrLmRhdGFzZXQubW91c2VEb3duQXQpIC0gZS5jbGllbnRYLFxuICAgIC8vICAgICAgICAgbWF4RGVsdGEgPSB3aW5kb3cuaW5uZXJXaWR0aCAvIDI7XG5cbiAgICAvLyAgIGNvbnN0IHBlcmNlbnRhZ2UgPSAobW91c2VEZWx0YSAvIG1heERlbHRhKSAqIC0xMDAsXG4gICAgLy8gICBuZXh0UGVyY2VudGFnZVVucmVzdHJpY3RlZCA9IHBhcnNlRmxvYXQodHJhY2suZGF0YXNldC5wcmV2UGVyY2VudGFnZSkgKyBwZXJjZW50YWdlO1xuXG4gICAgLy8gICBjb25zdCBuZXh0UGVyY2VudGFnZSA9IE1hdGgubWF4KE1hdGgubWluKG5leHRQZXJjZW50YWdlVW5yZXN0cmljdGVkLCAwKSwgLTEwMCk7XG4gICAgICBcbiAgICAvLyAgIHRyYWNrLmRhdGFzZXQucGVyY2VudGFnZSA9IG5leHRQZXJjZW50YWdlO1xuXG4gICAgLy8gICB0cmFjay5hbmltYXRlKHtcbiAgICAvLyAgICAgdHJhbnNmb3JtOiBgdHJhbnNsYXRlKCR7bmV4dFBlcmNlbnRhZ2V9JSwgLTUwJSlgXG4gICAgLy8gICB9LCB7IGR1cmF0aW9uOiAxMjAwLCBmaWxsOiBcImZvcndhcmRzXCJ9KVxuXG4gICAgLy8gICBmb3IgKGNvbnN0IGltYWdlIG9mIHRyYWNrLmdldEVsZW1lbnRzQnlDbGFzc05hbWUoJ2ltYWdlJykpIHtcbiAgICAvLyAgICAgaW1hZ2UuYW5pbWF0ZSh7XG4gICAgLy8gICAgICAgb2JqZWN0UG9zaXRpb246IGAke25leHRQZXJjZW50YWdlICsgMTAwfSUgY2VudGVyYFxuICAgIC8vICAgICB9LCB7IGR1cmF0aW9uOiAxMjAwLCBmaWxsOiBcImZvcndhcmRzXCJ9KVxuICAgIC8vICAgfVxuICAgIC8vIH1cblxuICAgIHRyYWNrLm9ud2hlZWwgPSBlID0+IHtcbiAgICAgICAgY29uc3QgbWF4RGVsdGEgPSB3aW5kb3cuaW5uZXJXaWR0aCAvIDI7XG5cbiAgICAgICAgY29uc3Qgc2Nyb2xsRGVsdGEgPSBlLmRlbHRhWSxcbiAgICAgICAgICAgICAgcGVyY2VudGFnZSA9IChzY3JvbGxEZWx0YSAvIG1heERlbHRhKSAqIC0xMDsgLy8g0JjQt9C80LXQvdGP0LXQvCDRgdC60L7RgNC+0YHRgtGMINGB0LrRgNC+0LvQu9CwXG5cbiAgICAgICAgY29uc29sZS5sb2cocGVyY2VudGFnZSlcbiAgICAgICAgY29uc3QgbmV4dFBlcmNlbnRhZ2VVbnJlc3RyaWN0ZWQgPSBwYXJzZUZsb2F0KHRyYWNrLmRhdGFzZXQucHJldlBlcmNlbnRhZ2UpICsgcGVyY2VudGFnZTtcbiAgICAgICAgY29uc3QgbmV4dFBlcmNlbnRhZ2UgPSBNYXRoLm1heChNYXRoLm1pbihuZXh0UGVyY2VudGFnZVVucmVzdHJpY3RlZCwgMCksIC0xMDApO1xuXG4gICAgICAgIHRyYWNrLmRhdGFzZXQucHJldlBlcmNlbnRhZ2UgPSBuZXh0UGVyY2VudGFnZTtcblxuICAgICAgICB0cmFjay5hbmltYXRlKHtcbiAgICAgICAgICB0cmFuc2Zvcm06IGB0cmFuc2xhdGUoJHtuZXh0UGVyY2VudGFnZX0lLCAtNTAlKWBcbiAgICAgICAgfSwgeyBkdXJhdGlvbjogMTIwMCwgZmlsbDogXCJmb3J3YXJkc1wifSlcbiAgXG4gICAgICAgIGZvciAoY29uc3QgaW1hZ2Ugb2YgdHJhY2suZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSgnaW1hZ2UnKSkge1xuICAgICAgICAgIGltYWdlLmFuaW1hdGUoe1xuICAgICAgICAgICAgb2JqZWN0UG9zaXRpb246IGAke25leHRQZXJjZW50YWdlICsgMTAwfSUgY2VudGVyYFxuICAgICAgICAgIH0sIHsgZHVyYXRpb246IDEyMDAsIGZpbGw6IFwiZm9yd2FyZHNcIn0pXG4gICAgICAgIH1cbiAgICB9XG4gIH1cblxuXG4gIGNhbGNPdGhlckltYWdlKCkge1xuICAgIGlmICghdGhpcy5pc0dyaWRWaWV3KSByZXR1cm4gZmFsc2U7XG5cbiAgICBjb25zdCBtYXN0ZXJDZWxsID0gYWRqdXN0ZWRCb3VuZGluZ1JlY3QodGhpcy5pbWFnZUNlbGxBcnJbMF0uRE9NLmVsKVxuXG4gICAgcmV0dXJuIHtcbiAgICAgIHdpZHRoOiBtYXN0ZXJDZWxsLndpZHRoLFxuICAgICAgaGVpZ2h0OiBtYXN0ZXJDZWxsLmhlaWdodCxcbiAgICAgIHg6IC1tYXN0ZXJDZWxsLmxlZnQsXG4gICAgICB5OiAtbWFzdGVyQ2VsbC50b3BcbiAgICB9XG4gIH1cblxuICBjYWxjVHJhbnNmb3JtSW1hZ2UoKSB7XG4gICAgY29uc3QgY2VsbHJlY3QgPSBhZGp1c3RlZEJvdW5kaW5nUmVjdCh0aGlzLmltYWdlQ2VsbEFyclt0aGlzLmN1cnJlbnRDZWxsXS5ET00uZWwpO1xuXG4gICAgcmV0dXJuIHtcbiAgICAgIHdpZHRoOiBjZWxscmVjdC53aWR0aCxcbiAgICAgIGhlaWdodDogY2VsbHJlY3QuaGVpZ2h0LFxuICAgICAgc2NhbGU6IHdpbnNpemUud2lkdGggKiAwLjU0IC8gY2VsbHJlY3Qud2lkdGgsXG4gICAgICAvLyB4OiB3aW5zaXplLndpZHRoICogMC42NSAtIChjZWxscmVjdC5sZWZ0ICsgY2VsbHJlY3Qud2lkdGgvMiksXG4gICAgICAvLyB5OiB3aW5zaXplLmhlaWdodCAqIDAuNTAgLSAoY2VsbHJlY3QudG9wICsgY2VsbHJlY3QuaGVpZ2h0LzIpXG4gICAgICB4OiAtY2VsbHJlY3QubGVmdCxcbiAgICAgIHk6IC1jZWxscmVjdC50b3BcbiAgICB9XG4gIH1cblxuXG59XG5cbi8vIGh0dHBzOi8vY2FtaWxsZW1vcm1hbC5jb20vIiwiY29uc3QgcHJlbG9hZGVyQW5pbWF0aW9uID0gKCkgPT4ge1xuICBsZXQgdGwgPSBnc2FwLnRpbWVsaW5lKHtkZWxheTogMH0pO1xuXG4gIHRsLnRvKCcuY29sJywge1xuICAgIHRvcDogMCxcbiAgICBkdXJhdGlvbjogMyxcbiAgICBlYXNlOiAncG93ZXI0LmluT3V0J1xuICB9KVxuICBcbiAgdGwudG8oJy5jLTEgLml0ZW0nLCB7XG4gICAgdG9wOiAwLFxuICAgIHN0YWdnZXI6IDAuMjUsXG4gICAgZHVyYXRpb246IDMsXG4gICAgZWFzZTogJ3Bvd2VyNC5pbk91dCdcbiAgfSwgJy09MicpXG4gIFxuICB0bC50bygnLmMtMiAuaXRlbScsIHtcbiAgICB0b3A6IDAsXG4gICAgc3RhZ2dlcjogLTAuMjUsXG4gICAgZHVyYXRpb246IDMsXG4gICAgZWFzZTogJ3Bvd2VyNC5pbk91dCdcbiAgfSwgJy09NCcpXG4gIFxuICB0bC50bygnLmMtMyAuaXRlbScsIHtcbiAgICB0b3A6IDAsXG4gICAgc3RhZ2dlcjogMC4yNSxcbiAgICBkdXJhdGlvbjogMyxcbiAgICBlYXNlOiAncG93ZXI0LmluT3V0J1xuICB9LCAnLT00JylcbiAgXG4gIHRsLnRvKCcuYy00IC5pdGVtJywge1xuICAgIHRvcDogMCxcbiAgICBzdGFnZ2VyOiAtMC4yNSxcbiAgICBkdXJhdGlvbjogMyxcbiAgICBlYXNlOiAncG93ZXI0LmluT3V0J1xuICB9LCAnLT00JylcbiAgXG4gIHRsLnRvKCcuYy01IC5pdGVtJywge1xuICAgIHRvcDogMCxcbiAgICBzdGFnZ2VyOiAwLjI1LFxuICAgIGR1cmF0aW9uOiAzLFxuICAgIGVhc2U6ICdwb3dlcjQuaW5PdXQnXG4gIH0sICctPTQnKVxuICBcbiAgdGwudG8oJy5jb250YWluZXInLCB7XG4gICAgc2NhbGU6IDUuMyxcbiAgICBkdXJhdGlvbjogNCxcbiAgICBlYXNlOiAncG93ZXI0LmluT3V0J1xuICB9LCAnLT0yJylcblxuICB0bC50bygnLmNyb3NzJywge1xuICAgIHNjYWxlOiAxLFxuICAgIGR1cmF0aW9uOiAxLFxuICAgIGVhc2U6ICdwb3dlcjMuaW5PdXQnLFxuICB9LCAnLT0xLjUnKVxuICBcbiAgdGwudG8oJy5uYXYtaXRlbSBhLCAudGl0bGUgcCwgLnNsaWRlLW51bSBwLCAucHJldmlldyBpbWcnLCB7XG4gICAgdG9wOiAwLFxuICAgIHN0YWdnZXI6IDAuMDc1LFxuICAgIGR1cmF0aW9uOiAxLFxuICAgIGVhc2U6ICdwb3dlcjMuaW5PdXQnLFxuICAgIG9uQ29tcGxldGU6ICgpID0+IHtcbiAgICAgIGdzYXAuc2V0KFsnLmNvbnRhaW5lcicsICcuY29udGVudC1wcmVsb2FkZXInXSwgeyBkaXNwbGF5OiBcIm5vbmVcIn0pXG4gICAgfVxuICB9LCAnLT0xLjUnKVxuICBcbn1cblxuZXhwb3J0IGRlZmF1bHQgcHJlbG9hZGVyQW5pbWF0aW9uOyIsIlxuXG5pbXBvcnQgJy4uL3Nhc3Mvc3R5bGUuc2Nzcyc7XG5pbXBvcnQgeyBwcmVsb2FkSW1hZ2VzIH0gZnJvbSAnLi91dGlscyc7XG5pbXBvcnQgeyBHcmlkIH0gZnJvbSAnLi9ncmlkJztcbmltcG9ydCBwcmVsb2FkZXJBbmltYXRpb24gZnJvbSAnLi9wcmVsb2FkZXJBbmltYXRpb24nO1xuXG5pbXBvcnQgZ3NhcCBmcm9tIFwiZ3NhcFwiO1xuXG5cbndpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdET01Db250ZW50TG9hZGVkJywgKCkgPT4ge1xuXG4gIHByZWxvYWRJbWFnZXMoJy5ncmlkX19jZWxsLWltZy1pbm5lciwgLnNsaWRlLW5hdl9faW1nJykudGhlbigoKSA9PiB7XG4gICAgcHJlbG9hZGVyQW5pbWF0aW9uKCk7XG4gICAgbmV3IEdyaWQoZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmdyaWQtLWxhcmdlJykpO1xuICAgIC8vIGRvY3VtZW50LmJvZHkuY2xhc3NMaXN0LnJlbW92ZSgnbG9hZGluZycpXG4gIH0pO1xuXG4gIC8vIGNvbnN0IHNldHVwTWVkaWFRdWVyaWVzID0gKCkgPT4ge1xuICAvLyAgIGNvbnN0IG1tID0gZ3NhcC5tYXRjaE1lZGlhKCk7XG4gIC8vICAgY29uc3QgYnJlYWtQb2ludCA9IDk5MTtcblxuICAvLyAgIG1tLmFkZCh7XG4gIC8vICAgICBpc01vYmlsZTogYChtYXgtd2lkdGg6ICR7YnJlYWtQb2ludH1weClgLFxuICAvLyAgICAgaXNEZXNrdG9wOiBgKG1pbi13aWR0aDogJHticmVha1BvaW50ICsgMX1weClgXG4gIC8vICAgfSwgKGNvbnRleHQpID0+IHtcbiAgLy8gICAgIGNvbnN0IHsgaXNNb2JpbGUsIGlzRGVza3RvcCB9ID0gY29udGV4dC5jb25kaXRpb25zO1xuXG4gIC8vICAgICBpZiAoaXNEZXNrdG9wKSBzZXR1cERlc2t0b3BGZWF0dXJlcygpO1xuICAvLyAgICAgaWYgKGlzTW9iaWxlKSBzZXR1cE1vYmlsZUZlYXR1cmVzKCk7XG4gIC8vICAgfSk7XG4gIC8vIH07XG5cbiAgLy8gY29uc3Qgc2V0dXBEZXNrdG9wRmVhdHVyZXMgPSAoKSA9PiB7XG4gIC8vIH07XG5cbiAgLy8gY29uc3Qgc2V0dXBNb2JpbGVGZWF0dXJlcyA9ICgpID0+IHtcblxuICAvLyB9O1xuXG5cbiAgLy8gc2V0dXBNZWRpYVF1ZXJpZXMoKTtcblxufSk7XG5cbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///986\n")}},__webpack_module_cache__={},deferred;function __webpack_require__(g){var n=__webpack_module_cache__[g];if(void 0!==n)return n.exports;var I=__webpack_module_cache__[g]={exports:{}};return __webpack_modules__[g].call(I.exports,I,I.exports,__webpack_require__),I.exports}__webpack_require__.m=__webpack_modules__,deferred=[],__webpack_require__.O=(g,n,I,C)=>{if(!n){var t=1/0;for(i=0;i<deferred.length;i++){for(var[n,I,C]=deferred[i],e=!0,l=0;l<n.length;l++)(!1&C||t>=C)&&Object.keys(__webpack_require__.O).every((g=>__webpack_require__.O[g](n[l])))?n.splice(l--,1):(e=!1,C<t&&(t=C));if(e){deferred.splice(i--,1);var A=I();void 0!==A&&(g=A)}}return g}C=C||0;for(var i=deferred.length;i>0&&deferred[i-1][2]>C;i--)deferred[i]=deferred[i-1];deferred[i]=[n,I,C]},__webpack_require__.d=(g,n)=>{for(var I in n)__webpack_require__.o(n,I)&&!__webpack_require__.o(g,I)&&Object.defineProperty(g,I,{enumerable:!0,get:n[I]})},__webpack_require__.o=(g,n)=>Object.prototype.hasOwnProperty.call(g,n),__webpack_require__.r=g=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(g,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(g,"__esModule",{value:!0})},(()=>{var g={179:0};__webpack_require__.O.j=n=>0===g[n];var n=(n,I)=>{var C,t,[e,l,A]=I,i=0;if(e.some((n=>0!==g[n]))){for(C in l)__webpack_require__.o(l,C)&&(__webpack_require__.m[C]=l[C]);if(A)var c=A(__webpack_require__)}for(n&&n(I);i<e.length;i++)t=e[i],__webpack_require__.o(g,t)&&g[t]&&g[t][0](),g[t]=0;return __webpack_require__.O(c)},I=self.webpackChunk=self.webpackChunk||[];I.forEach(n.bind(null,0)),I.push=n.bind(null,I.push.bind(I))})();var __webpack_exports__=__webpack_require__.O(void 0,[804],(()=>__webpack_require__(986)));return __webpack_exports__=__webpack_require__.O(__webpack_exports__),__webpack_exports__})()));